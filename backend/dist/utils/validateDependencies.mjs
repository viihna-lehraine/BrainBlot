import { isLogger } from '../config/logger.mjs';
export function validateDependencies(dependencies, logger = console) {
	const logInfo = isLogger(logger) ? logger.info : console.info;
	const logWarn = isLogger(logger) ? logger.warn : console.warn;
	const logError = isLogger(logger) ? logger.error : console.error;
	if (!dependencies || dependencies.length === 0) {
		logWarn('No dependencies provided for validation');
		throw new Error('No dependencies provided for validation');
	}
	try {
		logInfo(
			`Validating the following dependencies: ${dependencies.map(dep => `${dep.name}: ${dep.instance}`).join(', ')}`
		);
		const missingDependencies = dependencies.filter(
			({ instance }) => instance === undefined || instance === null
		);
		if (missingDependencies.length > 0) {
			const missingNames = missingDependencies
				.map(({ name }) => name)
				.join(', ');
			logError(`Missing dependencies: ${missingNames}`);
			throw new Error(`Missing dependencies: ${missingNames}`);
		}
		logInfo(
			`All dependencies are valid: ${dependencies
				.map(({ name }) => name)
				.join(', ')}`
		);
	} catch (error) {
		const message =
			error instanceof Error ? error.message : 'Unknown error';
		const stack = error instanceof Error ? error.stack : 'No stack trace';
		if (isLogger(logger)) {
			logger.error('An error occurred during dependency validation', {
				stack: stack ?? 'No stack trace',
				message: message ?? 'Unknown error'
			});
		} else {
			console.error('An error occurred during dependency validation', {
				stack: stack ?? 'No stack trace',
				message: message ?? 'Unknown error'
			});
		}
		throw error;
	}
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidmFsaWRhdGVEZXBlbmRlbmNpZXMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvdXRpbHMvdmFsaWRhdGVEZXBlbmRlbmNpZXMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLFFBQVEsRUFBVSxNQUFNLGtCQUFrQixDQUFDO0FBT3BELE1BQU0sVUFBVSxvQkFBb0IsQ0FDbkMsWUFBMEIsRUFDMUIsU0FBMkIsT0FBTztJQUVsQyxNQUFNLE9BQU8sR0FBRyxRQUFRLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUM7SUFDOUQsTUFBTSxPQUFPLEdBQUcsUUFBUSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDO0lBQzlELE1BQU0sUUFBUSxHQUFHLFFBQVEsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQztJQUVqRSxJQUFJLENBQUMsWUFBWSxJQUFJLFlBQVksQ0FBQyxNQUFNLEtBQUssQ0FBQyxFQUFFLENBQUM7UUFDaEQsT0FBTyxDQUFDLHlDQUF5QyxDQUFDLENBQUM7UUFDbkQsTUFBTSxJQUFJLEtBQUssQ0FBQyx5Q0FBeUMsQ0FBQyxDQUFDO0lBQzVELENBQUM7SUFFRCxJQUFJLENBQUM7UUFDSixPQUFPLENBQ04sMENBQTBDLFlBQVksQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxJQUFJLEtBQUssR0FBRyxDQUFDLFFBQVEsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQzlHLENBQUM7UUFFRixNQUFNLG1CQUFtQixHQUFHLFlBQVksQ0FBQyxNQUFNLENBQzlDLENBQUMsRUFBRSxRQUFRLEVBQUUsRUFBRSxFQUFFLENBQUMsUUFBUSxLQUFLLFNBQVMsSUFBSSxRQUFRLEtBQUssSUFBSSxDQUM3RCxDQUFDO1FBRUYsSUFBSSxtQkFBbUIsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFLENBQUM7WUFDcEMsTUFBTSxZQUFZLEdBQUcsbUJBQW1CO2lCQUN0QyxHQUFHLENBQUMsQ0FBQyxFQUFFLElBQUksRUFBRSxFQUFFLEVBQUUsQ0FBQyxJQUFJLENBQUM7aUJBQ3ZCLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUNiLFFBQVEsQ0FBQyx5QkFBeUIsWUFBWSxFQUFFLENBQUMsQ0FBQztZQUNsRCxNQUFNLElBQUksS0FBSyxDQUFDLHlCQUF5QixZQUFZLEVBQUUsQ0FBQyxDQUFDO1FBQzFELENBQUM7UUFFRCxPQUFPLENBQ04sK0JBQStCLFlBQVk7YUFDekMsR0FBRyxDQUFDLENBQUMsRUFBRSxJQUFJLEVBQUUsRUFBRSxFQUFFLENBQUMsSUFBSSxDQUFDO2FBQ3ZCLElBQUksQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUNkLENBQUM7SUFDSCxDQUFDO0lBQUMsT0FBTyxLQUFLLEVBQUUsQ0FBQztRQUNoQixNQUFNLE9BQU8sR0FDWixLQUFLLFlBQVksS0FBSyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxlQUFlLENBQUM7UUFDMUQsTUFBTSxLQUFLLEdBQUcsS0FBSyxZQUFZLEtBQUssQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsZ0JBQWdCLENBQUM7UUFFdEUsSUFBSSxRQUFRLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQztZQUN0QixNQUFNLENBQUMsS0FBSyxDQUFDLGdEQUFnRCxFQUFFO2dCQUM5RCxLQUFLLEVBQUUsS0FBSyxJQUFJLGdCQUFnQjtnQkFDaEMsT0FBTyxFQUFFLE9BQU8sSUFBSSxlQUFlO2FBQ25DLENBQUMsQ0FBQztRQUNKLENBQUM7YUFBTSxDQUFDO1lBQ1AsT0FBTyxDQUFDLEtBQUssQ0FBQyxnREFBZ0QsRUFBRTtnQkFDL0QsS0FBSyxFQUFFLEtBQUssSUFBSSxnQkFBZ0I7Z0JBQ2hDLE9BQU8sRUFBRSxPQUFPLElBQUksZUFBZTthQUNuQyxDQUFDLENBQUM7UUFDSixDQUFDO1FBQ0QsTUFBTSxLQUFLLENBQUM7SUFDYixDQUFDO0FBQ0YsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGlzTG9nZ2VyLCBMb2dnZXIgfSBmcm9tICcuLi9jb25maWcvbG9nZ2VyJztcblxuaW50ZXJmYWNlIERlcGVuZGVuY3kge1xuXHRuYW1lOiBzdHJpbmc7XG5cdGluc3RhbmNlOiB1bmtub3duO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGVEZXBlbmRlbmNpZXMoXG5cdGRlcGVuZGVuY2llczogRGVwZW5kZW5jeVtdLFxuXHRsb2dnZXI6IExvZ2dlciB8IENvbnNvbGUgPSBjb25zb2xlXG4pOiB2b2lkIHtcblx0Y29uc3QgbG9nSW5mbyA9IGlzTG9nZ2VyKGxvZ2dlcikgPyBsb2dnZXIuaW5mbyA6IGNvbnNvbGUuaW5mbztcblx0Y29uc3QgbG9nV2FybiA9IGlzTG9nZ2VyKGxvZ2dlcikgPyBsb2dnZXIud2FybiA6IGNvbnNvbGUud2Fybjtcblx0Y29uc3QgbG9nRXJyb3IgPSBpc0xvZ2dlcihsb2dnZXIpID8gbG9nZ2VyLmVycm9yIDogY29uc29sZS5lcnJvcjtcblxuXHRpZiAoIWRlcGVuZGVuY2llcyB8fCBkZXBlbmRlbmNpZXMubGVuZ3RoID09PSAwKSB7XG5cdFx0bG9nV2FybignTm8gZGVwZW5kZW5jaWVzIHByb3ZpZGVkIGZvciB2YWxpZGF0aW9uJyk7XG5cdFx0dGhyb3cgbmV3IEVycm9yKCdObyBkZXBlbmRlbmNpZXMgcHJvdmlkZWQgZm9yIHZhbGlkYXRpb24nKTtcblx0fVxuXG5cdHRyeSB7XG5cdFx0bG9nSW5mbyhcblx0XHRcdGBWYWxpZGF0aW5nIHRoZSBmb2xsb3dpbmcgZGVwZW5kZW5jaWVzOiAke2RlcGVuZGVuY2llcy5tYXAoZGVwID0+IGAke2RlcC5uYW1lfTogJHtkZXAuaW5zdGFuY2V9YCkuam9pbignLCAnKX1gXG5cdFx0KTtcblxuXHRcdGNvbnN0IG1pc3NpbmdEZXBlbmRlbmNpZXMgPSBkZXBlbmRlbmNpZXMuZmlsdGVyKFxuXHRcdFx0KHsgaW5zdGFuY2UgfSkgPT4gaW5zdGFuY2UgPT09IHVuZGVmaW5lZCB8fCBpbnN0YW5jZSA9PT0gbnVsbFxuXHRcdCk7XG5cblx0XHRpZiAobWlzc2luZ0RlcGVuZGVuY2llcy5sZW5ndGggPiAwKSB7XG5cdFx0XHRjb25zdCBtaXNzaW5nTmFtZXMgPSBtaXNzaW5nRGVwZW5kZW5jaWVzXG5cdFx0XHRcdC5tYXAoKHsgbmFtZSB9KSA9PiBuYW1lKVxuXHRcdFx0XHQuam9pbignLCAnKTtcblx0XHRcdGxvZ0Vycm9yKGBNaXNzaW5nIGRlcGVuZGVuY2llczogJHttaXNzaW5nTmFtZXN9YCk7XG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoYE1pc3NpbmcgZGVwZW5kZW5jaWVzOiAke21pc3NpbmdOYW1lc31gKTtcblx0XHR9XG5cblx0XHRsb2dJbmZvKFxuXHRcdFx0YEFsbCBkZXBlbmRlbmNpZXMgYXJlIHZhbGlkOiAke2RlcGVuZGVuY2llc1xuXHRcdFx0XHQubWFwKCh7IG5hbWUgfSkgPT4gbmFtZSlcblx0XHRcdFx0LmpvaW4oJywgJyl9YFxuXHRcdCk7XG5cdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0Y29uc3QgbWVzc2FnZSA9XG5cdFx0XHRlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJztcblx0XHRjb25zdCBzdGFjayA9IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5zdGFjayA6ICdObyBzdGFjayB0cmFjZSc7XG5cblx0XHRpZiAoaXNMb2dnZXIobG9nZ2VyKSkge1xuXHRcdFx0bG9nZ2VyLmVycm9yKCdBbiBlcnJvciBvY2N1cnJlZCBkdXJpbmcgZGVwZW5kZW5jeSB2YWxpZGF0aW9uJywge1xuXHRcdFx0XHRzdGFjazogc3RhY2sgPz8gJ05vIHN0YWNrIHRyYWNlJyxcblx0XHRcdFx0bWVzc2FnZTogbWVzc2FnZSA/PyAnVW5rbm93biBlcnJvcidcblx0XHRcdH0pO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRjb25zb2xlLmVycm9yKCdBbiBlcnJvciBvY2N1cnJlZCBkdXJpbmcgZGVwZW5kZW5jeSB2YWxpZGF0aW9uJywge1xuXHRcdFx0XHRzdGFjazogc3RhY2sgPz8gJ05vIHN0YWNrIHRyYWNlJyxcblx0XHRcdFx0bWVzc2FnZTogbWVzc2FnZSA/PyAnVW5rbm93biBlcnJvcidcblx0XHRcdH0pO1xuXHRcdH1cblx0XHR0aHJvdyBlcnJvcjtcblx0fVxufVxuIl19
