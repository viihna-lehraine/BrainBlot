import { serviceTTLConfig } from '../config/cache.mjs';
import { withRetry } from '../utils/helpers.mjs';
import { LoggerServiceFactory } from '../index/factory/subfactories/LoggerServiceFactory.mjs';
import { ErrorHandlerServiceFactory } from '../index/factory/subfactories/ErrorHandlerServiceFactory.mjs';
import { CacheLayerServiceFactory } from '../index/factory/subfactories/CacheLayerServiceFactory.mjs';
export class CacheService {
	static instance = null;
	logger;
	errorLogger;
	errorHandler;
	redisService;
	memoryCache = new Map();
	memoryCacheLRU = new Map();
	serviceMetrics = {};
	constructor(logger, errorLogger, errorHandler, redisService) {
		this.logger = logger;
		this.errorLogger = errorLogger;
		this.errorHandler = errorHandler;
		this.redisService = redisService;
	}
	static async getInstance() {
		if (!CacheService.instance) {
			CacheService.instance = new CacheService(
				await LoggerServiceFactory.getLoggerService(),
				await LoggerServiceFactory.getErrorLoggerService(),
				await ErrorHandlerServiceFactory.getErrorHandlerService(),
				await CacheLayerServiceFactory.getRedisService()
			);
		}
		return CacheService.instance;
	}
	getServiceTTL(service) {
		return serviceTTLConfig[service] || serviceTTLConfig['default'];
	}
	getNamespacedKey(service, key) {
		return `${service}:${key}`;
	}
	updateMetrics(service, type) {
		if (!this.serviceMetrics[service]) {
			this.serviceMetrics[service] = {
				cacheHits: 0,
				cacheMisses: 0,
				redisHits: 0
			};
		}
		if (type === 'hit') {
			this.serviceMetrics[service].cacheHits++;
		} else if (type === 'miss') {
			this.serviceMetrics[service].cacheMisses++;
		} else if (type === 'redisHit') {
			this.serviceMetrics[service].redisHits++;
		}
	}
	getCacheMetrics(service) {
		return (
			this.serviceMetrics[service] || {
				cacheHits: 0,
				cacheMisses: 0,
				redisHits: 0
			}
		);
	}
	getMemoryCache(service) {
		return this.memoryCache.get(service) || null;
	}
	async get(key, service) {
		const namespacedKey = this.getNamespacedKey(service, key);
		try {
			const serviceMemoryCache = this.memoryCache.get(service);
			if (serviceMemoryCache) {
				const memoryEntry = serviceMemoryCache.get(namespacedKey);
				if (memoryEntry) {
					if (
						memoryEntry.expiration &&
						Date.now() > memoryEntry.expiration
					) {
						serviceMemoryCache.delete(namespacedKey);
						this.logger.info(
							`Memory cache expired for key: ${namespacedKey}`
						);
					} else {
						this.memoryCacheLRU.set(namespacedKey, Date.now());
						this.updateMetrics(service, 'hit');
						this.logger.info(
							`Memory cache hit for key: ${namespacedKey}`
						);
						return memoryEntry.value;
					}
				}
			}
			const redisValue =
				(await this.redisService?.get(namespacedKey)) ?? null;
			if (redisValue !== null) {
				const defaultExpiration =
					Date.now() + this.getServiceTTL(service) * 1000;
				if (!serviceMemoryCache) {
					this.memoryCache.set(service, new Map());
				}
				this.memoryCache.get(service)?.set(namespacedKey, {
					value: redisValue,
					expiration: defaultExpiration
				});
				this.memoryCacheLRU.set(namespacedKey, Date.now());
				this.updateMetrics(service, 'redisHit');
				this.logger.info(`Fetched key: ${namespacedKey} from Redis`);
				return redisValue;
			} else {
				this.updateMetrics(service, 'miss');
				this.logger.info(`Cache miss for key: ${namespacedKey}`);
			}
			return null;
		} catch (error) {
			this.handleCacheError(
				error,
				'CACHE_GET_ERROR',
				{ key, service },
				`Error fetching key ${namespacedKey} from cache for service ${service}`
			);
			return null;
		}
	}
	async set(key, value, service, expirationInSeconds) {
		const namespacedKey = this.getNamespacedKey(service, key);
		try {
			const expiration = expirationInSeconds
				? Date.now() + Number(expirationInSeconds) * 1000
				: Date.now() + this.getServiceTTL(service) * 1000;
			let serviceMemoryCache = this.memoryCache.get(service);
			if (!serviceMemoryCache) {
				serviceMemoryCache = new Map();
				this.memoryCache.set(service, serviceMemoryCache);
			}
			serviceMemoryCache.set(namespacedKey, { value, expiration });
			this.memoryCacheLRU.set(namespacedKey, Date.now());
			await this.redisService?.set(
				namespacedKey,
				value,
				Number(expirationInSeconds)
			);
			this.logger.info(
				`Key ${namespacedKey} set with TTL ${expirationInSeconds || this.getServiceTTL(service)} seconds in both memory and Redis cache`
			);
		} catch (error) {
			this.handleCacheError(
				error,
				'CACHE_SET_ERROR',
				{ key, service, expirationInSeconds },
				`Error setting key ${namespacedKey} in cache for service ${service}`
			);
		}
	}
	async exists(key, service) {
		const namespacedKey = this.getNamespacedKey(service, key);
		try {
			const serviceMemoryCache = this.memoryCache.get(service);
			if (serviceMemoryCache?.has(namespacedKey)) {
				this.logger.info(
					`Key ${namespacedKey} exists in memory cache, checked by service ${service}`
				);
				this.updateMetrics(service, 'hit');
				return true;
			}
			const redisExists = await this.redisService?.exists(namespacedKey);
			if (redisExists) {
				this.logger.info(
					`Key ${namespacedKey} exists in Redis, checked by service ${service}`
				);
				this.updateMetrics(service, 'redisHit');
				return true;
			}
			this.logger.info(
				`Key ${namespacedKey} does not exist in memory or Redis, checked by service ${service}`
			);
			this.updateMetrics(service, 'miss');
			return false;
		} catch (error) {
			this.handleCacheError(
				error,
				'CACHE_EXISTS_ERROR',
				{ key, service },
				`Error checking existence of key ${namespacedKey} for service ${service}`
			);
			return false;
		}
	}
	async del(key, service) {
		const namespacedKey = this.getNamespacedKey(service, key);
		try {
			const serviceMemoryCache = this.memoryCache.get(service);
			if (serviceMemoryCache) {
				serviceMemoryCache.delete(namespacedKey);
				this.logger.info(
					`Key ${namespacedKey} deleted from memory cache by service ${service}`
				);
			}
			await this.redisService?.del(namespacedKey);
			this.logger.info(
				`Key ${namespacedKey} deleted from Redis by service ${service}`
			);
		} catch (error) {
			this.handleCacheError(
				error,
				'CACHE_DELETE_ERROR',
				{ key, service },
				`Error deleting key ${namespacedKey} from cache for service ${service}`
			);
		}
	}
	async increment(key, service, expirationInSeconds) {
		const namespacedKey = this.getNamespacedKey(service, key);
		try {
			let serviceMemoryCache = this.memoryCache.get(service);
			let newValue = null;
			if (serviceMemoryCache) {
				const memoryEntry = serviceMemoryCache.get(namespacedKey);
				if (memoryEntry && typeof memoryEntry.value === 'number') {
					memoryEntry.value += 1;
					newValue = memoryEntry.value;
					this.logger.info(
						`Memory cache incremented for key: ${namespacedKey} by service: ${service}`
					);
				}
			}
			if (!serviceMemoryCache || typeof newValue !== 'number') {
				newValue =
					(await this.redisService?.increment(
						namespacedKey,
						expirationInSeconds
					)) ?? null;
				if (newValue !== null) {
					const expiration = expirationInSeconds
						? Date.now() + expirationInSeconds * 1000
						: Date.now() + this.getServiceTTL(service) * 1000;
					if (!serviceMemoryCache) {
						serviceMemoryCache = new Map();
						this.memoryCache.set(service, serviceMemoryCache);
					}
					serviceMemoryCache.set(namespacedKey, {
						value: newValue,
						expiration
					});
					this.logger.info(
						`Fetched incremented value from Redis and added to memory cache for key: ${namespacedKey} by service: ${service}`
					);
				}
			}
			return newValue;
		} catch (error) {
			this.handleCacheError(
				error,
				'CACHE_INCREMENT_ERROR',
				{
					reason: `Cache increment failed for key ${key}`,
					key: key || 'unknown',
					expiration: expirationInSeconds || 'unknown',
					service: service || 'unknown'
				},
				`Error incrementing key ${namespacedKey} in cache for service ${service}`
			);
			return null;
		}
	}
	async flushCache(service) {
		try {
			const serviceMemoryCache = this.memoryCache.get(service);
			if (serviceMemoryCache) {
				serviceMemoryCache.clear();
				this.memoryCache.delete(service);
				this.logger.info(
					`Memory cache flushed for service: ${service}`
				);
			}
			const serviceKeys = await this.redisService?.getKeysByPattern(
				`${service}:*`
			);
			if (typeof serviceKeys === 'undefined') {
				this.logger.warn(
					`Redis cache flush failed for service: ${service}`
				);
				return;
			}
			if (serviceKeys.length > 0) {
				await this.redisService?.delMultiple(service, serviceKeys);
				this.logger.info(`Redis cache flushed for service: ${service}`);
			}
		} catch (error) {
			this.handleCacheError(
				error,
				'CACHE_FLUSH_ERROR',
				{
					reason: `Cache flush failed for service ${service}`,
					service: service || 'unknown'
				},
				`Error flushing cache for service ${service}`
			);
		}
	}
	cleanupExpiredEntries() {
		withRetry(
			() => {
				for (const [service, cache] of this.memoryCache.entries()) {
					for (const [key, { expiration }] of cache.entries()) {
						if (expiration && Date.now() > expiration) {
							cache.delete(key);
							this.logger.info(
								`Expired memory cache entry removed for key: ${key} from service: ${service}`
							);
						}
					}
				}
			},
			3,
			1000
		).catch(error => {
			this.logger.error(
				`Error cleaning up expired memory cache entries after retries: ${error}`
			);
		});
	}
	async clearNamespace(service) {
		try {
			const serviceMemoryCache = this.memoryCache.get(service);
			if (serviceMemoryCache) {
				serviceMemoryCache.clear();
				this.memoryCache.delete(service);
				this.logger.info(
					`Memory cache cleared for service: ${service}`
				);
			}
			const serviceKeys = await this.redisService?.getKeysByPattern(
				`${service}:*`
			);
			if (typeof serviceKeys === 'undefined') {
				this.logger.warn(
					`Redis cache clear failed for service: ${service}`
				);
				return;
			}
			if (serviceKeys.length > 0) {
				await this.redisService?.delMultiple(service, serviceKeys);
				this.logger.info(`Redis cache cleared for service: ${service}`);
			}
		} catch (error) {
			this.handleCacheError(
				error,
				'CACHE_CLEAR_NAMESPACE_ERROR',
				{ service },
				`Error clearing cache for service ${service}`
			);
		}
	}
	async closeConnection() {
		try {
			await withRetry(
				async () => await this.redisService?.cleanUpRedisClient(),
				3,
				1000
			);
		} catch (error) {
			this.handleCacheError(
				error,
				'CACHE_CLOSE_CONNECTION_ERROR',
				{
					reason: `Cache connection close failed`
				},
				`Error closing cache connection`
			);
		}
	}
	async shutdown() {
		try {
			this.logger.info(
				'Shutting down Redis connection before Cache Service...'
			);
			try {
				await this.redisService?.cleanUpRedisClient();
				this.logger.info('Redis connection closed successfully.');
			} catch (redisError) {
				this.logger.error(
					`Failed to shut down Redis connection: ${redisError instanceof Error ? redisError.message : redisError}`
				);
			}
			this.logger.info('Clearing memory cache in Cache Service...');
			this.memoryCache.clear();
			this.memoryCacheLRU.clear();
			this.logger.info('Memory cache cleared successfully.');
			this.redisService = null;
			this.logger.info('Cache service shutdown completed.');
		} catch (error) {
			this.handleCacheError(
				error,
				'CACHE_SHUTDOWN_ERROR',
				{},
				`Error shutting down Cache Service`
			);
		}
	}
	handleCacheError(error, errorHeader, errorDetails, customMessage) {
		const errorMessage = `${customMessage}: ${error}\n${error instanceof Error ? error.stack : ''}`;
		this.errorLogger.logError(errorMessage);
		const cacheError = new this.errorHandler.ErrorClasses.CacheServiceError(
			errorHeader,
			{
				details: errorDetails,
				exposeToClient: false
			}
		);
		this.errorHandler.handleError({
			error: cacheError
		});
	}
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQ2FjaGUuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvc2VydmljZXMvQ2FjaGUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBUUEsT0FBTyxFQUFFLGdCQUFnQixFQUFFLE1BQU0saUJBQWlCLENBQUM7QUFDbkQsT0FBTyxFQUFFLFNBQVMsRUFBRSxNQUFNLGtCQUFrQixDQUFDO0FBQzdDLE9BQU8sRUFBRSxvQkFBb0IsRUFBRSxNQUFNLG9EQUFvRCxDQUFDO0FBQzFGLE9BQU8sRUFBRSwwQkFBMEIsRUFBRSxNQUFNLDBEQUEwRCxDQUFDO0FBQ3RHLE9BQU8sRUFBRSx3QkFBd0IsRUFBRSxNQUFNLHdEQUF3RCxDQUFDO0FBRWxHLE1BQU0sT0FBTyxZQUFZO0lBQ2hCLE1BQU0sQ0FBQyxRQUFRLEdBQXdCLElBQUksQ0FBQztJQUU1QyxNQUFNLENBQTRCO0lBQ2xDLFdBQVcsQ0FBOEI7SUFDekMsWUFBWSxDQUErQjtJQUMzQyxZQUFZLENBQStCO0lBRTNDLFdBQVcsR0FBRyxJQUFJLEdBQUcsRUFHMUIsQ0FBQztJQUNJLGNBQWMsR0FBRyxJQUFJLEdBQUcsRUFBa0IsQ0FBQztJQUMzQyxjQUFjLEdBTWxCLEVBQUUsQ0FBQztJQUVQLFlBQ0MsTUFBaUMsRUFDakMsV0FBd0MsRUFDeEMsWUFBMEMsRUFDMUMsWUFBbUM7UUFFbkMsSUFBSSxDQUFDLE1BQU0sR0FBRyxNQUFNLENBQUM7UUFDckIsSUFBSSxDQUFDLFdBQVcsR0FBRyxXQUFXLENBQUM7UUFDL0IsSUFBSSxDQUFDLFlBQVksR0FBRyxZQUFZLENBQUM7UUFDakMsSUFBSSxDQUFDLFlBQVksR0FBRyxZQUFZLENBQUM7SUFDbEMsQ0FBQztJQUVNLE1BQU0sQ0FBQyxLQUFLLENBQUMsV0FBVztRQUM5QixJQUFJLENBQUMsWUFBWSxDQUFDLFFBQVEsRUFBRSxDQUFDO1lBQzVCLFlBQVksQ0FBQyxRQUFRLEdBQUcsSUFBSSxZQUFZLENBQ3ZDLE1BQU0sb0JBQW9CLENBQUMsZ0JB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UUFFckIsTUFBTSxZQUFZLEdBQUcsR0FBRyxhQUFhLEtBQUssS0FBSyxLQUFLLEtBQUssWUFBWSxLQUFLLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDO1FBQ2hHLElBQUksQ0FBQyxXQUFXLENBQUMsUUFBUSxDQUFDLFlBQVksQ0FBQyxDQUFDO1FBRXhDLE1BQU0sVUFBVSxHQUFHLElBQUksSUFBSSxDQUFDLFlBQVksQ0FBQyxZQUFZLENBQUMsaUJBQWlCLENBQ3RFLFdBQVcsRUFDWDtZQUNDLE9BQU8sRUFBRSxZQUFZO1lBQ3JCLGNBQWMsRUFBRSxLQUFLO1NBQ3JCLENBQ0QsQ0FBQztRQUVGLElBQUksQ0FBQyxZQUFZLENBQUMsV0FBVyxDQUFDO1lBQzdCLEtBQUssRUFBRSxVQUFVO1NBQ2pCLENBQUMsQ0FBQztJQUNKLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuXHRBcHBMb2dnZXJTZXJ2aWNlSW50ZXJmYWNlLFxuXHRDYWNoZU1ldHJpY3MsXG5cdENhY2hlU2VydmljZUludGVyZmFjZSxcblx0RXJyb3JIYW5kbGVyU2VydmljZUludGVyZmFjZSxcblx0RXJyb3JMb2dnZXJTZXJ2aWNlSW50ZXJmYWNlLFxuXHRSZWRpc1NlcnZpY2VJbnRlcmZhY2Vcbn0gZnJvbSAnLi4vaW5kZXgvaW50ZXJmYWNlcy9tYWluJztcbmltcG9ydCB7IHNlcnZpY2VUVExDb25maWcgfSBmcm9tICcuLi9jb25maWcvY2FjaGUnO1xuaW1wb3J0IHsgd2l0aFJldHJ5IH0gZnJvbSAnLi4vdXRpbHMvaGVscGVycyc7XG5pbXBvcnQgeyBMb2dnZXJTZXJ2aWNlRmFjdG9yeSB9IGZyb20gJy4uL2luZGV4L2ZhY3Rvcnkvc3ViZmFjdG9yaWVzL0xvZ2dlclNlcnZpY2VGYWN0b3J5JztcbmltcG9ydCB7IEVycm9ySGFuZGxlclNlcnZpY2VGYWN0b3J5IH0gZnJvbSAnLi4vaW5kZXgvZmFjdG9yeS9zdWJmYWN0b3JpZXMvRXJyb3JIYW5kbGVyU2VydmljZUZhY3RvcnknO1xuaW1wb3J0IHsgQ2FjaGVMYXllclNlcnZpY2VGYWN0b3J5IH0gZnJvbSAnLi4vaW5kZXgvZmFjdG9yeS9zdWJmYWN0b3JpZXMvQ2FjaGVMYXllclNlcnZpY2VGYWN0b3J5JztcblxuZXhwb3J0IGNsYXNzIENhY2hlU2VydmljZSBpbXBsZW1lbnRzIENhY2hlU2VydmljZUludGVyZmFjZSB7XG5cdHByaXZhdGUgc3RhdGljIGluc3RhbmNlOiBDYWNoZVNlcnZpY2UgfCBudWxsID0gbnVsbDtcblxuXHRwcml2YXRlIGxvZ2dlcjogQXBwTG9nZ2VyU2VydmljZUludGVyZmFjZTtcblx0cHJpdmF0ZSBlcnJvckxvZ2dlcjogRXJyb3JMb2dnZXJTZXJ2aWNlSW50ZXJmYWNlO1xuXHRwcml2YXRlIGVycm9ySGFuZGxlcjogRXJyb3JIYW5kbGVyU2VydmljZUludGVyZmFjZTtcblx0cHJpdmF0ZSByZWRpc1NlcnZpY2U6IFJlZGlzU2VydmljZUludGVyZmFjZSB8IG51bGw7XG5cblx0cHJpdmF0ZSBtZW1vcnlDYWNoZSA9IG5ldyBNYXA8XG5cdFx0c3RyaW5nLFxuXHRcdE1hcDxzdHJpbmcsIHsgdmFsdWU6IHVua25vd247IGV4cGlyYXRpb246IG51bWJlciB8IHVuZGVmaW5lZCB9PlxuXHQ+KCk7XG5cdHByaXZhdGUgbWVtb3J5Q2FjaGVMUlUgPSBuZXcgTWFwPHN0cmluZywgbnVtYmVyPigpO1xuXHRwcml2YXRlIHNlcnZpY2VNZXRyaWNzOiB7XG5cdFx0W3NlcnZpY2U6IHN0cmluZ106IHtcblx0XHRcdGNhY2hlSGl0czogbnVtYmVyO1xuXHRcdFx0Y2FjaGVNaXNzZXM6IG51bWJlcjtcblx0XHRcdHJlZGlzSGl0czogbnVtYmVyO1xuXHRcdH07XG5cdH0gPSB7fTtcblxuXHRwcml2YXRlIGNvbnN0cnVjdG9yKFxuXHRcdGxvZ2dlcjogQXBwTG9nZ2VyU2VydmljZUludGVyZmFjZSxcblx0XHRlcnJvckxvZ2dlcjogRXJyb3JMb2dnZXJTZXJ2aWNlSW50ZXJmYWNlLFxuXHRcdGVycm9ySGFuZGxlcjogRXJyb3JIYW5kbGVyU2VydmljZUludGVyZmFjZSxcblx0XHRyZWRpc1NlcnZpY2U6IFJlZGlzU2VydmljZUludGVyZmFjZVxuXHQpIHtcblx0XHR0aGlzLmxvZ2dlciA9IGxvZ2dlcjtcblx0XHR0aGlzLmVycm9yTG9nZ2VyID0gZXJyb3JMb2dnZXI7XG5cdFx0dGhpcy5lcnJvckhhbmRsZXIgPSBlcnJvckhhbmRsZXI7XG5cdFx0dGhpcy5yZWRpc1NlcnZpY2UgPSByZWRpc1NlcnZpY2U7XG5cdH1cblxuXHRwdWJsaWMgc3RhdGljIGFzeW5jIGdldEluc3RhbmNlKCk6IFByb21pc2U8Q2FjaGVTZXJ2aWNlPiB7XG5cdFx0aWYgKCFDYWNoZVNlcnZpY2UuaW5zdGFuY2UpIHtcblx0XHRcdENhY2hlU2VydmljZS5pbnN0YW5jZSA9IG5ldyBDYWNoZVNlcnZpY2UoXG5cdFx0XHRcdGF3YWl0IExvZ2dlclNlcnZpY2VGYWN0b3J5LmdldExvZ2dlclNlcnZpY2UoKSxcblx0XHRcdFx0YXdhaXQgTG9nZ2VyU2VydmljZUZhY3RvcnkuZ2V0RXJyb3JMb2dnZXJTZXJ2aWNlKCksXG5cdFx0XHRcdGF3YWl0IEVycm9ySGFuZGxlclNlcnZpY2VGYWN0b3J5LmdldEVycm9ySGFuZGxlclNlcnZpY2UoKSxcblx0XHRcdFx0YXdhaXQgQ2FjaGVMYXllclNlcnZpY2VGYWN0b3J5LmdldFJlZGlzU2VydmljZSgpXG5cdFx0XHQpO1xuXHRcdH1cblxuXHRcdHJldHVybiBDYWNoZVNlcnZpY2UuaW5zdGFuY2U7XG5cdH1cblxuXHRwcml2YXRlIGdldFNlcnZpY2VUVEwoc2VydmljZTogc3RyaW5nKTogbnVtYmVyIHtcblx0XHRyZXR1cm4gc2VydmljZVRUTENvbmZpZ1tzZXJ2aWNlXSB8fCBzZXJ2aWNlVFRMQ29uZmlnWydkZWZhdWx0J107XG5cdH1cblxuXHRwcml2YXRlIGdldE5hbWVzcGFjZWRLZXkoc2VydmljZTogc3RyaW5nLCBrZXk6IHN0cmluZyk6IHN0cmluZyB7XG5cdFx0cmV0dXJuIGAke3NlcnZpY2V9OiR7a2V5fWA7XG5cdH1cblxuXHRwcml2YXRlIHVwZGF0ZU1ldHJpY3MoXG5cdFx0c2VydmljZTogc3RyaW5nLFxuXHRcdHR5cGU6ICdoaXQnIHwgJ21pc3MnIHwgJ3JlZGlzSGl0J1xuXHQpOiB2b2lkIHtcblx0XHRpZiAoIXRoaXMuc2VydmljZU1ldHJpY3Nbc2VydmljZV0pIHtcblx0XHRcdHRoaXMuc2VydmljZU1ldHJpY3Nbc2VydmljZV0gPSB7XG5cdFx0XHRcdGNhY2hlSGl0czogMCxcblx0XHRcdFx0Y2FjaGVNaXNzZXM6IDAsXG5cdFx0XHRcdHJlZGlzSGl0czogMFxuXHRcdFx0fTtcblx0XHR9XG5cblx0XHRpZiAodHlwZSA9PT0gJ2hpdCcpIHtcblx0XHRcdHRoaXMuc2VydmljZU1ldHJpY3Nbc2VydmljZV0uY2FjaGVIaXRzKys7XG5cdFx0fSBlbHNlIGlmICh0eXBlID09PSAnbWlzcycpIHtcblx0XHRcdHRoaXMuc2VydmljZU1ldHJpY3Nbc2VydmljZV0uY2FjaGVNaXNzZXMrKztcblx0XHR9IGVsc2UgaWYgKHR5cGUgPT09ICdyZWRpc0hpdCcpIHtcblx0XHRcdHRoaXMuc2VydmljZU1ldHJpY3Nbc2VydmljZV0ucmVkaXNIaXRzKys7XG5cdFx0fVxuXHR9XG5cblx0cHVibGljIGdldENhY2hlTWV0cmljcyhzZXJ2aWNlOiBzdHJpbmcpOiBDYWNoZU1ldHJpY3Mge1xuXHRcdHJldHVybiAoXG5cdFx0XHR0aGlzLnNlcnZpY2VNZXRyaWNzW3NlcnZpY2VdIHx8IHtcblx0XHRcdFx0Y2FjaGVIaXRzOiAwLFxuXHRcdFx0XHRjYWNoZU1pc3NlczogMCxcblx0XHRcdFx0cmVkaXNIaXRzOiAwXG5cdFx0XHR9XG5cdFx0KTtcblx0fVxuXG5cdHB1YmxpYyBnZXRNZW1vcnlDYWNoZShcblx0XHRzZXJ2aWNlOiBzdHJpbmdcblx0KTogTWFwPHN0cmluZywgeyB2YWx1ZTogdW5rbm93bjsgZXhwaXJhdGlvbjogbnVtYmVyIHwgdW5kZWZpbmVkIH0+IHwgbnVsbCB7XG5cdFx0cmV0dXJuIHRoaXMubWVtb3J5Q2FjaGUuZ2V0KHNlcnZpY2UpIHx8IG51bGw7XG5cdH1cblxuXHRwdWJsaWMgYXN5bmMgZ2V0PFQ+KGtleTogc3RyaW5nLCBzZXJ2aWNlOiBzdHJpbmcpOiBQcm9taXNlPFQgfCBudWxsPiB7XG5cdFx0Y29uc3QgbmFtZXNwYWNlZEtleSA9IHRoaXMuZ2V0TmFtZXNwYWNlZEtleShzZXJ2aWNlLCBrZXkpO1xuXG5cdFx0dHJ5IHtcblx0XHRcdGNvbnN0IHNlcnZpY2VNZW1vcnlDYWNoZSA9IHRoaXMubWVtb3J5Q2FjaGUuZ2V0KHNlcnZpY2UpO1xuXHRcdFx0aWYgKHNlcnZpY2VNZW1vcnlDYWNoZSkge1xuXHRcdFx0XHRjb25zdCBtZW1vcnlFbnRyeSA9IHNlcnZpY2VNZW1vcnlDYWNoZS5nZXQobmFtZXNwYWNlZEtleSk7XG5cdFx0XHRcdGlmIChtZW1vcnlFbnRyeSkge1xuXHRcdFx0XHRcdGlmIChcblx0XHRcdFx0XHRcdG1lbW9yeUVudHJ5LmV4cGlyYXRpb24gJiZcblx0XHRcdFx0XHRcdERhdGUubm93KCkgPiBtZW1vcnlFbnRyeS5leHBpcmF0aW9uXG5cdFx0XHRcdFx0KSB7XG5cdFx0XHRcdFx0XHRzZXJ2aWNlTWVtb3J5Q2FjaGUuZGVsZXRlKG5hbWVzcGFjZWRLZXkpO1xuXHRcdFx0XHRcdFx0dGhpcy5sb2dnZXIuaW5mbyhcblx0XHRcdFx0XHRcdFx0YE1lbW9yeSBjYWNoZSBleHBpcmVkIGZvciBrZXk6ICR7bmFtZXNwYWNlZEtleX1gXG5cdFx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHR0aGlzLm1lbW9yeUNhY2hlTFJVLnNldChuYW1lc3BhY2VkS2V5LCBEYXRlLm5vdygpKTtcblx0XHRcdFx0XHRcdHRoaXMudXBkYXRlTWV0cmljcyhzZXJ2aWNlLCAnaGl0Jyk7XG5cdFx0XHRcdFx0XHR0aGlzLmxvZ2dlci5pbmZvKFxuXHRcdFx0XHRcdFx0XHRgTWVtb3J5IGNhY2hlIGhpdCBmb3Iga2V5OiAke25hbWVzcGFjZWRLZXl9YFxuXHRcdFx0XHRcdFx0KTtcblx0XHRcdFx0XHRcdHJldHVybiBtZW1vcnlFbnRyeS52YWx1ZSBhcyBUO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHRjb25zdCByZWRpc1ZhbHVlID1cblx0XHRcdFx0KGF3YWl0IHRoaXMucmVkaXNTZXJ2aWNlPy5nZXQ8VD4obmFtZXNwYWNlZEtleSkpID8/IG51bGw7XG5cdFx0XHRpZiAocmVkaXNWYWx1ZSAhPT0gbnVsbCkge1xuXHRcdFx0XHRjb25zdCBkZWZhdWx0RXhwaXJhdGlvbiA9XG5cdFx0XHRcdFx0RGF0ZS5ub3coKSArIHRoaXMuZ2V0U2VydmljZVRUTChzZXJ2aWNlKSAqIDEwMDA7XG5cdFx0XHRcdGlmICghc2VydmljZU1lbW9yeUNhY2hlKSB7XG5cdFx0XHRcdFx0dGhpcy5tZW1vcnlDYWNoZS5zZXQoc2VydmljZSwgbmV3IE1hcCgpKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdHRoaXMubWVtb3J5Q2FjaGUuZ2V0KHNlcnZpY2UpPy5zZXQobmFtZXNwYWNlZEtleSwge1xuXHRcdFx0XHRcdHZhbHVlOiByZWRpc1ZhbHVlLFxuXHRcdFx0XHRcdGV4cGlyYXRpb246IGRlZmF1bHRFeHBpcmF0aW9uXG5cdFx0XHRcdH0pO1xuXHRcdFx0XHR0aGlzLm1lbW9yeUNhY2hlTFJVLnNldChuYW1lc3BhY2VkS2V5LCBEYXRlLm5vdygpKTtcblxuXHRcdFx0XHR0aGlzLnVwZGF0ZU1ldHJpY3Moc2VydmljZSwgJ3JlZGlzSGl0Jyk7XG5cdFx0XHRcdHRoaXMubG9nZ2VyLmluZm8oYEZldGNoZWQga2V5OiAke25hbWVzcGFjZWRLZXl9IGZyb20gUmVkaXNgKTtcblx0XHRcdFx0cmV0dXJuIHJlZGlzVmFsdWU7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR0aGlzLnVwZGF0ZU1ldHJpY3Moc2VydmljZSwgJ21pc3MnKTtcblx0XHRcdFx0dGhpcy5sb2dnZXIuaW5mbyhgQ2FjaGUgbWlzcyBmb3Iga2V5OiAke25hbWVzcGFjZWRLZXl9YCk7XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBudWxsO1xuXHRcdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0XHR0aGlzLmhhbmRsZUNhY2hlRXJyb3IoXG5cdFx0XHRcdGVycm9yLFxuXHRcdFx0XHQnQ0FDSEVfR0VUX0VSUk9SJyxcblx0XHRcdFx0eyBrZXksIHNlcnZpY2UgfSxcblx0XHRcdFx0YEVycm9yIGZldGNoaW5nIGtleSAke25hbWVzcGFjZWRLZXl9IGZyb20gY2FjaGUgZm9yIHNlcnZpY2UgJHtzZXJ2aWNlfWBcblx0XHRcdCk7XG5cdFx0XHRyZXR1cm4gbnVsbDtcblx0XHR9XG5cdH1cblxuXHRwdWJsaWMgYXN5bmMgc2V0PFQ+KFxuXHRcdGtleTogc3RyaW5nLFxuXHRcdHZhbHVlOiBULFxuXHRcdHNlcnZpY2U6IHN0cmluZyxcblx0XHRleHBpcmF0aW9uSW5TZWNvbmRzPzogc3RyaW5nIHwgbnVtYmVyXG5cdCk6IFByb21pc2U8dm9pZD4ge1xuXHRcdGNvbnN0IG5hbWVzcGFjZWRLZXkgPSB0aGlzLmdldE5hbWVzcGFjZWRLZXkoc2VydmljZSwga2V5KTtcblxuXHRcdHRyeSB7XG5cdFx0XHRjb25zdCBleHBpcmF0aW9uID0gZXhwaXJhdGlvbkluU2Vjb25kc1xuXHRcdFx0XHQ/IERhdGUubm93KCkgKyBOdW1iZXIoZXhwaXJhdGlvbkluU2Vjb25kcykgKiAxMDAwXG5cdFx0XHRcdDogRGF0ZS5ub3coKSArIHRoaXMuZ2V0U2VydmljZVRUTChzZXJ2aWNlKSAqIDEwMDA7XG5cblx0XHRcdGxldCBzZXJ2aWNlTWVtb3J5Q2FjaGUgPSB0aGlzLm1lbW9yeUNhY2hlLmdldChzZXJ2aWNlKTtcblxuXHRcdFx0aWYgKCFzZXJ2aWNlTWVtb3J5Q2FjaGUpIHtcblx0XHRcdFx0c2VydmljZU1lbW9yeUNhY2hlID0gbmV3IE1hcCgpO1xuXHRcdFx0XHR0aGlzLm1lbW9yeUNhY2hlLnNldChzZXJ2aWNlLCBzZXJ2aWNlTWVtb3J5Q2FjaGUpO1xuXHRcdFx0fVxuXG5cdFx0XHRzZXJ2aWNlTWVtb3J5Q2FjaGUuc2V0KG5hbWVzcGFjZWRLZXksIHsgdmFsdWUsIGV4cGlyYXRpb24gfSk7XG5cdFx0XHR0aGlzLm1lbW9yeUNhY2hlTFJVLnNldChuYW1lc3BhY2VkS2V5LCBEYXRlLm5vdygpKTtcblxuXHRcdFx0YXdhaXQgdGhpcy5yZWRpc1NlcnZpY2U/LnNldChcblx0XHRcdFx0bmFtZXNwYWNlZEtleSxcblx0XHRcdFx0dmFsdWUsXG5cdFx0XHRcdE51bWJlcihleHBpcmF0aW9uSW5TZWNvbmRzKVxuXHRcdFx0KTtcblxuXHRcdFx0dGhpcy5sb2dnZXIuaW5mbyhcblx0XHRcdFx0YEtleSAke25hbWVzcGFjZWRLZXl9IHNldCB3aXRoIFRUTCAke1xuXHRcdFx0XHRcdGV4cGlyYXRpb25JblNlY29uZHMgfHwgdGhpcy5nZXRTZXJ2aWNlVFRMKHNlcnZpY2UpXG5cdFx0XHRcdH0gc2Vjb25kcyBpbiBib3RoIG1lbW9yeSBhbmQgUmVkaXMgY2FjaGVgXG5cdFx0XHQpO1xuXHRcdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0XHR0aGlzLmhhbmRsZUNhY2hlRXJyb3IoXG5cdFx0XHRcdGVycm9yLFxuXHRcdFx0XHQnQ0FDSEVfU0VUX0VSUk9SJyxcblx0XHRcdFx0eyBrZXksIHNlcnZpY2UsIGV4cGlyYXRpb25JblNlY29uZHMgfSxcblx0XHRcdFx0YEVycm9yIHNldHRpbmcga2V5ICR7bmFtZXNwYWNlZEtleX0gaW4gY2FjaGUgZm9yIHNlcnZpY2UgJHtzZXJ2aWNlfWBcblx0XHRcdCk7XG5cdFx0fVxuXHR9XG5cblx0cHVibGljIGFzeW5jIGV4aXN0cyhrZXk6IHN0cmluZywgc2VydmljZTogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiB7XG5cdFx0Y29uc3QgbmFtZXNwYWNlZEtleSA9IHRoaXMuZ2V0TmFtZXNwYWNlZEtleShzZXJ2aWNlLCBrZXkpO1xuXHRcdHRyeSB7XG5cdFx0XHRjb25zdCBzZXJ2aWNlTWVtb3J5Q2FjaGUgPSB0aGlzLm1lbW9yeUNhY2hlLmdldChzZXJ2aWNlKTtcblx0XHRcdGlmIChzZXJ2aWNlTWVtb3J5Q2FjaGU/LmhhcyhuYW1lc3BhY2VkS2V5KSkge1xuXHRcdFx0XHR0aGlzLmxvZ2dlci5pbmZvKFxuXHRcdFx0XHRcdGBLZXkgJHtuYW1lc3BhY2VkS2V5fSBleGlzdHMgaW4gbWVtb3J5IGNhY2hlLCBjaGVja2VkIGJ5IHNlcnZpY2UgJHtzZXJ2aWNlfWBcblx0XHRcdFx0KTtcblx0XHRcdFx0dGhpcy51cGRhdGVNZXRyaWNzKHNlcnZpY2UsICdoaXQnKTtcblx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHR9XG5cblx0XHRcdGNvbnN0IHJlZGlzRXhpc3RzID0gYXdhaXQgdGhpcy5yZWRpc1NlcnZpY2U/LmV4aXN0cyhuYW1lc3BhY2VkS2V5KTtcblx0XHRcdGlmIChyZWRpc0V4aXN0cykge1xuXHRcdFx0XHR0aGlzLmxvZ2dlci5pbmZvKFxuXHRcdFx0XHRcdGBLZXkgJHtuYW1lc3BhY2VkS2V5fSBleGlzdHMgaW4gUmVkaXMsIGNoZWNrZWQgYnkgc2VydmljZSAke3NlcnZpY2V9YFxuXHRcdFx0XHQpO1xuXHRcdFx0XHR0aGlzLnVwZGF0ZU1ldHJpY3Moc2VydmljZSwgJ3JlZGlzSGl0Jyk7XG5cdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0fVxuXG5cdFx0XHR0aGlzLmxvZ2dlci5pbmZvKFxuXHRcdFx0XHRgS2V5ICR7bmFtZXNwYWNlZEtleX0gZG9lcyBub3QgZXhpc3QgaW4gbWVtb3J5IG9yIFJlZGlzLCBjaGVja2VkIGJ5IHNlcnZpY2UgJHtzZXJ2aWNlfWBcblx0XHRcdCk7XG5cdFx0XHR0aGlzLnVwZGF0ZU1ldHJpY3Moc2VydmljZSwgJ21pc3MnKTtcblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9IGNhdGNoIChlcnJvcikge1xuXHRcdFx0dGhpcy5oYW5kbGVDYWNoZUVycm9yKFxuXHRcdFx0XHRlcnJvcixcblx0XHRcdFx0J0NBQ0hFX0VYSVNUU19FUlJPUicsXG5cdFx0XHRcdHsga2V5LCBzZXJ2aWNlIH0sXG5cdFx0XHRcdGBFcnJvciBjaGVja2luZyBleGlzdGVuY2Ugb2Yga2V5ICR7bmFtZXNwYWNlZEtleX0gZm9yIHNlcnZpY2UgJHtzZXJ2aWNlfWBcblx0XHRcdCk7XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fVxuXHR9XG5cblx0cHVibGljIGFzeW5jIGRlbChrZXk6IHN0cmluZywgc2VydmljZTogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0Y29uc3QgbmFtZXNwYWNlZEtleSA9IHRoaXMuZ2V0TmFtZXNwYWNlZEtleShzZXJ2aWNlLCBrZXkpO1xuXHRcdHRyeSB7XG5cdFx0XHRjb25zdCBzZXJ2aWNlTWVtb3J5Q2FjaGUgPSB0aGlzLm1lbW9yeUNhY2hlLmdldChzZXJ2aWNlKTtcblx0XHRcdGlmIChzZXJ2aWNlTWVtb3J5Q2FjaGUpIHtcblx0XHRcdFx0c2VydmljZU1lbW9yeUNhY2hlLmRlbGV0ZShuYW1lc3BhY2VkS2V5KTtcblx0XHRcdFx0dGhpcy5sb2dnZXIuaW5mbyhcblx0XHRcdFx0XHRgS2V5ICR7bmFtZXNwYWNlZEtleX0gZGVsZXRlZCBmcm9tIG1lbW9yeSBjYWNoZSBieSBzZXJ2aWNlICR7c2VydmljZX1gXG5cdFx0XHRcdCk7XG5cdFx0XHR9XG5cblx0XHRcdGF3YWl0IHRoaXMucmVkaXNTZXJ2aWNlPy5kZWwobmFtZXNwYWNlZEtleSk7XG5cdFx0XHR0aGlzLmxvZ2dlci5pbmZvKFxuXHRcdFx0XHRgS2V5ICR7bmFtZXNwYWNlZEtleX0gZGVsZXRlZCBmcm9tIFJlZGlzIGJ5IHNlcnZpY2UgJHtzZXJ2aWNlfWBcblx0XHRcdCk7XG5cdFx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRcdHRoaXMuaGFuZGxlQ2FjaGVFcnJvcihcblx0XHRcdFx0ZXJyb3IsXG5cdFx0XHRcdCdDQUNIRV9ERUxFVEVfRVJST1InLFxuXHRcdFx0XHR7IGtleSwgc2VydmljZSB9LFxuXHRcdFx0XHRgRXJyb3IgZGVsZXRpbmcga2V5ICR7bmFtZXNwYWNlZEtleX0gZnJvbSBjYWNoZSBmb3Igc2VydmljZSAke3NlcnZpY2V9YFxuXHRcdFx0KTtcblx0XHR9XG5cdH1cblxuXHRwdWJsaWMgYXN5bmMgaW5jcmVtZW50KFxuXHRcdGtleTogc3RyaW5nLFxuXHRcdHNlcnZpY2U6IHN0cmluZyxcblx0XHRleHBpcmF0aW9uSW5TZWNvbmRzPzogbnVtYmVyXG5cdCk6IFByb21pc2U8bnVtYmVyIHwgbnVsbD4ge1xuXHRcdGNvbnN0IG5hbWVzcGFjZWRLZXkgPSB0aGlzLmdldE5hbWVzcGFjZWRLZXkoc2VydmljZSwga2V5KTtcblxuXHRcdHRyeSB7XG5cdFx0XHRsZXQgc2VydmljZU1lbW9yeUNhY2hlID0gdGhpcy5tZW1vcnlDYWNoZS5nZXQoc2VydmljZSk7XG5cdFx0XHRsZXQgbmV3VmFsdWU6IG51bWJlciB8IG51bGwgPSBudWxsO1xuXG5cdFx0XHRpZiAoc2VydmljZU1lbW9yeUNhY2hlKSB7XG5cdFx0XHRcdGNvbnN0IG1lbW9yeUVudHJ5ID0gc2VydmljZU1lbW9yeUNhY2hlLmdldChuYW1lc3BhY2VkS2V5KTtcblx0XHRcdFx0aWYgKG1lbW9yeUVudHJ5ICYmIHR5cGVvZiBtZW1vcnlFbnRyeS52YWx1ZSA9PT0gJ251bWJlcicpIHtcblx0XHRcdFx0XHRtZW1vcnlFbnRyeS52YWx1ZSArPSAxO1xuXHRcdFx0XHRcdG5ld1ZhbHVlID0gbWVtb3J5RW50cnkudmFsdWU7XG5cdFx0XHRcdFx0dGhpcy5sb2dnZXIuaW5mbyhcblx0XHRcdFx0XHRcdGBNZW1vcnkgY2FjaGUgaW5jcmVtZW50ZWQgZm9yIGtleTogJHtuYW1lc3BhY2VkS2V5fSBieSBzZXJ2aWNlOiAke3NlcnZpY2V9YFxuXHRcdFx0XHRcdCk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0aWYgKCFzZXJ2aWNlTWVtb3J5Q2FjaGUgfHwgdHlwZW9mIG5ld1ZhbHVlICE9PSAnbnVtYmVyJykge1xuXHRcdFx0XHRuZXdWYWx1ZSA9XG5cdFx0XHRcdFx0KGF3YWl0IHRoaXMucmVkaXNTZXJ2aWNlPy5pbmNyZW1lbnQoXG5cdFx0XHRcdFx0XHRuYW1lc3BhY2VkS2V5LFxuXHRcdFx0XHRcdFx0ZXhwaXJhdGlvbkluU2Vjb25kc1xuXHRcdFx0XHRcdCkpID8/IG51bGw7XG5cdFx0XHRcdGlmIChuZXdWYWx1ZSAhPT0gbnVsbCkge1xuXHRcdFx0XHRcdGNvbnN0IGV4cGlyYXRpb24gPSBleHBpcmF0aW9uSW5TZWNvbmRzXG5cdFx0XHRcdFx0XHQ/IERhdGUubm93KCkgKyBleHBpcmF0aW9uSW5TZWNvbmRzICogMTAwMFxuXHRcdFx0XHRcdFx0OiBEYXRlLm5vdygpICsgdGhpcy5nZXRTZXJ2aWNlVFRMKHNlcnZpY2UpICogMTAwMDtcblxuXHRcdFx0XHRcdGlmICghc2VydmljZU1lbW9yeUNhY2hlKSB7XG5cdFx0XHRcdFx0XHRzZXJ2aWNlTWVtb3J5Q2FjaGUgPSBuZXcgTWFwKCk7XG5cdFx0XHRcdFx0XHR0aGlzLm1lbW9yeUNhY2hlLnNldChzZXJ2aWNlLCBzZXJ2aWNlTWVtb3J5Q2FjaGUpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRzZXJ2aWNlTWVtb3J5Q2FjaGUuc2V0KG5hbWVzcGFjZWRLZXksIHtcblx0XHRcdFx0XHRcdHZhbHVlOiBuZXdWYWx1ZSxcblx0XHRcdFx0XHRcdGV4cGlyYXRpb25cblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR0aGlzLmxvZ2dlci5pbmZvKFxuXHRcdFx0XHRcdFx0YEZldGNoZWQgaW5jcmVtZW50ZWQgdmFsdWUgZnJvbSBSZWRpcyBhbmQgYWRkZWQgdG8gbWVtb3J5IGNhY2hlIGZvciBrZXk6ICR7bmFtZXNwYWNlZEtleX0gYnkgc2VydmljZTogJHtzZXJ2aWNlfWBcblx0XHRcdFx0XHQpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBuZXdWYWx1ZTtcblx0XHR9IGNhdGNoIChlcnJvcikge1xuXHRcdFx0dGhpcy5oYW5kbGVDYWNoZUVycm9yKFxuXHRcdFx0XHRlcnJvcixcblx0XHRcdFx0J0NBQ0hFX0lOQ1JFTUVOVF9FUlJPUicsXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRyZWFzb246IGBDYWNoZSBpbmNyZW1lbnQgZmFpbGVkIGZvciBrZXkgJHtrZXl9YCxcblx0XHRcdFx0XHRrZXk6IGtleSB8fCAndW5rbm93bicsXG5cdFx0XHRcdFx0ZXhwaXJhdGlvbjogZXhwaXJhdGlvbkluU2Vjb25kcyB8fCAndW5rbm93bicsXG5cdFx0XHRcdFx0c2VydmljZTogc2VydmljZSB8fCAndW5rbm93bidcblx0XHRcdFx0fSxcblx0XHRcdFx0YEVycm9yIGluY3JlbWVudGluZyBrZXkgJHtuYW1lc3BhY2VkS2V5fSBpbiBjYWNoZSBmb3Igc2VydmljZSAke3NlcnZpY2V9YFxuXHRcdFx0KTtcblx0XHRcdHJldHVybiBudWxsO1xuXHRcdH1cblx0fVxuXG5cdHB1YmxpYyBhc3luYyBmbHVzaENhY2hlKHNlcnZpY2U6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuXHRcdHRyeSB7XG5cdFx0XHRjb25zdCBzZXJ2aWNlTWVtb3J5Q2FjaGUgPSB0aGlzLm1lbW9yeUNhY2hlLmdldChzZXJ2aWNlKTtcblx0XHRcdGlmIChzZXJ2aWNlTWVtb3J5Q2FjaGUpIHtcblx0XHRcdFx0c2VydmljZU1lbW9yeUNhY2hlLmNsZWFyKCk7XG5cdFx0XHRcdHRoaXMubWVtb3J5Q2FjaGUuZGVsZXRlKHNlcnZpY2UpO1xuXHRcdFx0XHR0aGlzLmxvZ2dlci5pbmZvKFxuXHRcdFx0XHRcdGBNZW1vcnkgY2FjaGUgZmx1c2hlZCBmb3Igc2VydmljZTogJHtzZXJ2aWNlfWBcblx0XHRcdFx0KTtcblx0XHRcdH1cblxuXHRcdFx0Y29uc3Qgc2VydmljZUtleXMgPSBhd2FpdCB0aGlzLnJlZGlzU2VydmljZT8uZ2V0S2V5c0J5UGF0dGVybihcblx0XHRcdFx0YCR7c2VydmljZX06KmBcblx0XHRcdCk7XG5cblx0XHRcdGlmICh0eXBlb2Ygc2VydmljZUtleXMgPT09ICd1bmRlZmluZWQnKSB7XG5cdFx0XHRcdHRoaXMubG9nZ2VyLndhcm4oXG5cdFx0XHRcdFx0YFJlZGlzIGNhY2hlIGZsdXNoIGZhaWxlZCBmb3Igc2VydmljZTogJHtzZXJ2aWNlfWBcblx0XHRcdFx0KTtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXHRcdFx0aWYgKHNlcnZpY2VLZXlzLmxlbmd0aCA+IDApIHtcblx0XHRcdFx0YXdhaXQgdGhpcy5yZWRpc1NlcnZpY2U/LmRlbE11bHRpcGxlKHNlcnZpY2UsIHNlcnZpY2VLZXlzKTtcblx0XHRcdFx0dGhpcy5sb2dnZXIuaW5mbyhgUmVkaXMgY2FjaGUgZmx1c2hlZCBmb3Igc2VydmljZTogJHtzZXJ2aWNlfWApO1xuXHRcdFx0fVxuXHRcdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0XHR0aGlzLmhhbmRsZUNhY2hlRXJyb3IoXG5cdFx0XHRcdGVycm9yLFxuXHRcdFx0XHQnQ0FDSEVfRkxVU0hfRVJST1InLFxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0cmVhc29uOiBgQ2FjaGUgZmx1c2ggZmFpbGVkIGZvciBzZXJ2aWNlICR7c2VydmljZX1gLFxuXHRcdFx0XHRcdHNlcnZpY2U6IHNlcnZpY2UgfHwgJ3Vua25vd24nXG5cdFx0XHRcdH0sXG5cdFx0XHRcdGBFcnJvciBmbHVzaGluZyBjYWNoZSBmb3Igc2VydmljZSAke3NlcnZpY2V9YFxuXHRcdFx0KTtcblx0XHR9XG5cdH1cblxuXHRwdWJsaWMgY2xlYW51cEV4cGlyZWRFbnRyaWVzKCk6IHZvaWQge1xuXHRcdHdpdGhSZXRyeShcblx0XHRcdCgpID0+IHtcblx0XHRcdFx0Zm9yIChjb25zdCBbc2VydmljZSwgY2FjaGVdIG9mIHRoaXMubWVtb3J5Q2FjaGUuZW50cmllcygpKSB7XG5cdFx0XHRcdFx0Zm9yIChjb25zdCBba2V5LCB7IGV4cGlyYXRpb24gfV0gb2YgY2FjaGUuZW50cmllcygpKSB7XG5cdFx0XHRcdFx0XHRpZiAoZXhwaXJhdGlvbiAmJiBEYXRlLm5vdygpID4gZXhwaXJhdGlvbikge1xuXHRcdFx0XHRcdFx0XHRjYWNoZS5kZWxldGUoa2V5KTtcblx0XHRcdFx0XHRcdFx0dGhpcy5sb2dnZXIuaW5mbyhcblx0XHRcdFx0XHRcdFx0XHRgRXhwaXJlZCBtZW1vcnkgY2FjaGUgZW50cnkgcmVtb3ZlZCBmb3Iga2V5OiAke2tleX0gZnJvbSBzZXJ2aWNlOiAke3NlcnZpY2V9YFxuXHRcdFx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSxcblx0XHRcdDMsXG5cdFx0XHQxMDAwXG5cdFx0KS5jYXRjaChlcnJvciA9PiB7XG5cdFx0XHR0aGlzLmxvZ2dlci5lcnJvcihcblx0XHRcdFx0YEVycm9yIGNsZWFuaW5nIHVwIGV4cGlyZWQgbWVtb3J5IGNhY2hlIGVudHJpZXMgYWZ0ZXIgcmV0cmllczogJHtlcnJvcn1gXG5cdFx0XHQpO1xuXHRcdH0pO1xuXHR9XG5cblx0cHVibGljIGFzeW5jIGNsZWFyTmFtZXNwYWNlKHNlcnZpY2U6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuXHRcdHRyeSB7XG5cdFx0XHRjb25zdCBzZXJ2aWNlTWVtb3J5Q2FjaGUgPSB0aGlzLm1lbW9yeUNhY2hlLmdldChzZXJ2aWNlKTtcblxuXHRcdFx0aWYgKHNlcnZpY2VNZW1vcnlDYWNoZSkge1xuXHRcdFx0XHRzZXJ2aWNlTWVtb3J5Q2FjaGUuY2xlYXIoKTtcblx0XHRcdFx0dGhpcy5tZW1vcnlDYWNoZS5kZWxldGUoc2VydmljZSk7XG5cdFx0XHRcdHRoaXMubG9nZ2VyLmluZm8oXG5cdFx0XHRcdFx0YE1lbW9yeSBjYWNoZSBjbGVhcmVkIGZvciBzZXJ2aWNlOiAke3NlcnZpY2V9YFxuXHRcdFx0XHQpO1xuXHRcdFx0fVxuXG5cdFx0XHRjb25zdCBzZXJ2aWNlS2V5cyA9IGF3YWl0IHRoaXMucmVkaXNTZXJ2aWNlPy5nZXRLZXlzQnlQYXR0ZXJuKFxuXHRcdFx0XHRgJHtzZXJ2aWNlfToqYFxuXHRcdFx0KTtcblxuXHRcdFx0aWYgKHR5cGVvZiBzZXJ2aWNlS2V5cyA9PT0gJ3VuZGVmaW5lZCcpIHtcblx0XHRcdFx0dGhpcy5sb2dnZXIud2Fybihcblx0XHRcdFx0XHRgUmVkaXMgY2FjaGUgY2xlYXIgZmFpbGVkIGZvciBzZXJ2aWNlOiAke3NlcnZpY2V9YFxuXHRcdFx0XHQpO1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdGlmIChzZXJ2aWNlS2V5cy5sZW5ndGggPiAwKSB7XG5cdFx0XHRcdGF3YWl0IHRoaXMucmVkaXNTZXJ2aWNlPy5kZWxNdWx0aXBsZShzZXJ2aWNlLCBzZXJ2aWNlS2V5cyk7XG5cdFx0XHRcdHRoaXMubG9nZ2VyLmluZm8oYFJlZGlzIGNhY2hlIGNsZWFyZWQgZm9yIHNlcnZpY2U6ICR7c2VydmljZX1gKTtcblx0XHRcdH1cblx0XHR9IGNhdGNoIChlcnJvcikge1xuXHRcdFx0dGhpcy5oYW5kbGVDYWNoZUVycm9yKFxuXHRcdFx0XHRlcnJvcixcblx0XHRcdFx0J0NBQ0hFX0NMRUFSX05BTUVTUEFDRV9FUlJPUicsXG5cdFx0XHRcdHsgc2VydmljZSB9LFxuXHRcdFx0XHRgRXJyb3IgY2xlYXJpbmcgY2FjaGUgZm9yIHNlcnZpY2UgJHtzZXJ2aWNlfWBcblx0XHRcdCk7XG5cdFx0fVxuXHR9XG5cblx0cHVibGljIGFzeW5jIGNsb3NlQ29ubmVjdGlvbigpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHR0cnkge1xuXHRcdFx0YXdhaXQgd2l0aFJldHJ5KFxuXHRcdFx0XHRhc3luYyAoKSA9PiBhd2FpdCB0aGlzLnJlZGlzU2VydmljZT8uY2xlYW5VcFJlZGlzQ2xpZW50KCksXG5cdFx0XHRcdDMsXG5cdFx0XHRcdDEwMDBcblx0XHRcdCk7XG5cdFx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRcdHRoaXMuaGFuZGxlQ2FjaGVFcnJvcihcblx0XHRcdFx0ZXJyb3IsXG5cdFx0XHRcdCdDQUNIRV9DTE9TRV9DT05ORUNUSU9OX0VSUk9SJyxcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHJlYXNvbjogYENhY2hlIGNvbm5lY3Rpb24gY2xvc2UgZmFpbGVkYFxuXHRcdFx0XHR9LFxuXHRcdFx0XHRgRXJyb3IgY2xvc2luZyBjYWNoZSBjb25uZWN0aW9uYFxuXHRcdFx0KTtcblx0XHR9XG5cdH1cblxuXHRwdWJsaWMgYXN5bmMgc2h1dGRvd24oKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0dHJ5IHtcblx0XHRcdHRoaXMubG9nZ2VyLmluZm8oXG5cdFx0XHRcdCdTaHV0dGluZyBkb3duIFJlZGlzIGNvbm5lY3Rpb24gYmVmb3JlIENhY2hlIFNlcnZpY2UuLi4nXG5cdFx0XHQpO1xuXHRcdFx0dHJ5IHtcblx0XHRcdFx0YXdhaXQgdGhpcy5yZWRpc1NlcnZpY2U/LmNsZWFuVXBSZWRpc0NsaWVudCgpO1xuXHRcdFx0XHR0aGlzLmxvZ2dlci5pbmZvKCdSZWRpcyBjb25uZWN0aW9uIGNsb3NlZCBzdWNjZXNzZnVsbHkuJyk7XG5cdFx0XHR9IGNhdGNoIChyZWRpc0Vycm9yKSB7XG5cdFx0XHRcdHRoaXMubG9nZ2VyLmVycm9yKFxuXHRcdFx0XHRcdGBGYWlsZWQgdG8gc2h1dCBkb3duIFJlZGlzIGNvbm5lY3Rpb246ICR7cmVkaXNFcnJvciBpbnN0YW5jZW9mIEVycm9yID8gcmVkaXNFcnJvci5tZXNzYWdlIDogcmVkaXNFcnJvcn1gXG5cdFx0XHRcdCk7XG5cdFx0XHR9XG5cblx0XHRcdHRoaXMubG9nZ2VyLmluZm8oJ0NsZWFyaW5nIG1lbW9yeSBjYWNoZSBpbiBDYWNoZSBTZXJ2aWNlLi4uJyk7XG5cblx0XHRcdHRoaXMubWVtb3J5Q2FjaGUuY2xlYXIoKTtcblx0XHRcdHRoaXMubWVtb3J5Q2FjaGVMUlUuY2xlYXIoKTtcblxuXHRcdFx0dGhpcy5sb2dnZXIuaW5mbygnTWVtb3J5IGNhY2hlIGNsZWFyZWQgc3VjY2Vzc2Z1bGx5LicpO1xuXG5cdFx0XHR0aGlzLnJlZGlzU2VydmljZSA9IG51bGw7XG5cdFx0XHR0aGlzLmxvZ2dlci5pbmZvKCdDYWNoZSBzZXJ2aWNlIHNodXRkb3duIGNvbXBsZXRlZC4nKTtcblx0XHR9IGNhdGNoIChlcnJvcikge1xuXHRcdFx0dGhpcy5oYW5kbGVDYWNoZUVycm9yKFxuXHRcdFx0XHRlcnJvcixcblx0XHRcdFx0J0NBQ0hFX1NIVVRET1dOX0VSUk9SJyxcblx0XHRcdFx0e30sXG5cdFx0XHRcdGBFcnJvciBzaHV0dGluZyBkb3duIENhY2hlIFNlcnZpY2VgXG5cdFx0XHQpO1xuXHRcdH1cblx0fVxuXG5cdHByaXZhdGUgaGFuZGxlQ2FjaGVFcnJvcihcblx0XHRlcnJvcjogdW5rbm93bixcblx0XHRlcnJvckhlYWRlcjogc3RyaW5nLFxuXHRcdGVycm9yRGV0YWlsczogb2JqZWN0LFxuXHRcdGN1c3RvbU1lc3NhZ2U6IHN0cmluZ1xuXHQpOiB2b2lkIHtcblx0XHRjb25zdCBlcnJvck1lc3NhZ2UgPSBgJHtjdXN0b21NZXNzYWdlfTogJHtlcnJvcn1cXG4ke2Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5zdGFjayA6ICcnfWA7XG5cdFx0dGhpcy5lcnJvckxvZ2dlci5sb2dFcnJvcihlcnJvck1lc3NhZ2UpO1xuXG5cdFx0Y29uc3QgY2FjaGVFcnJvciA9IG5ldyB0aGlzLmVycm9ySGFuZGxlci5FcnJvckNsYXNzZXMuQ2FjaGVTZXJ2aWNlRXJyb3IoXG5cdFx0XHRlcnJvckhlYWRlcixcblx0XHRcdHtcblx0XHRcdFx0ZGV0YWlsczogZXJyb3JEZXRhaWxzLFxuXHRcdFx0XHRleHBvc2VUb0NsaWVudDogZmFsc2Vcblx0XHRcdH1cblx0XHQpO1xuXG5cdFx0dGhpcy5lcnJvckhhbmRsZXIuaGFuZGxlRXJyb3Ioe1xuXHRcdFx0ZXJyb3I6IGNhY2hlRXJyb3Jcblx0XHR9KTtcblx0fVxufVxuIl19
