import { execSync } from 'child_process';
import path from 'path';
let __dirname = process.cwd();
function getDirectoryPath() {
	// Return the absolute path to the directory containing secrets.js
	return path.resolve(__dirname);
}
async function getSecrets() {
	try {
		let secretsPath = path.join(
			getDirectoryPath(),
			'../backend/config/secrets.json.gpg'
		);
		console.log('Resolved secrets path:', secretsPath); // debugging line to verify the correct path
		let decryptedSecrets = execSync(
			`sops -d --output-type json ${secretsPath}`
		).toString();
		return JSON.parse(decryptedSecrets);
	} catch (err) {
		console.error('Error retrieving secrets from SOPS: ', err);
		throw err;
	}
}
export default getSecrets;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2VjcmV0cy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9jb25maWcvc2VjcmV0cy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsUUFBUSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQ3pDLE9BQU8sSUFBSSxNQUFNLE1BQU0sQ0FBQztBQUV4QixJQUFJLFNBQVMsR0FBRyxPQUFPLENBQUMsR0FBRyxFQUFFLENBQUM7QUFFOUIsU0FBUyxnQkFBZ0I7SUFDeEIsa0VBQWtFO0lBQ2xFLE9BQU8sSUFBSSxDQUFDLE9BQU8sQ0FBQyxTQUFTLENBQUMsQ0FBQztBQUNoQyxDQUFDO0FBRUQsS0FBSyxVQUFVLFVBQVU7SUFDeEIsSUFBSSxDQUFDO1FBQ0osSUFBSSxXQUFXLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FDMUIsZ0JBQWdCLEVBQUUsRUFDbEIsb0NBQW9DLENBQ3BDLENBQUM7UUFDRixPQUFPLENBQUMsR0FBRyxDQUFDLHdCQUF3QixFQUFFLFdBQVcsQ0FBQyxDQUFDLENBQUMsNENBQTRDO1FBQ2hHLElBQUksZ0JBQWdCLEdBQUcsUUFBUSxDQUM5Qiw4QkFBOEIsV0FBVyxFQUFFLENBQzNDLENBQUMsUUFBUSxFQUFFLENBQUM7UUFDYixPQUFPLElBQUksQ0FBQyxLQUFLLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztJQUNyQyxDQUFDO0lBQUMsT0FBTyxHQUFHLEVBQUUsQ0FBQztRQUNkLE9BQU8sQ0FBQyxLQUFLLENBQUMsc0NBQXNDLEVBQUUsR0FBRyxDQUFDLENBQUM7UUFDM0QsTUFBTSxHQUFHLENBQUM7SUFDWCxDQUFDO0FBQ0YsQ0FBQztBQUVELGVBQWUsVUFBVSxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZXhlY1N5bmMgfSBmcm9tICdjaGlsZF9wcm9jZXNzJztcbmltcG9ydCBwYXRoIGZyb20gJ3BhdGgnO1xuXG5sZXQgX19kaXJuYW1lID0gcHJvY2Vzcy5jd2QoKTtcblxuZnVuY3Rpb24gZ2V0RGlyZWN0b3J5UGF0aCgpIHtcblx0Ly8gUmV0dXJuIHRoZSBhYnNvbHV0ZSBwYXRoIHRvIHRoZSBkaXJlY3RvcnkgY29udGFpbmluZyBzZWNyZXRzLmpzXG5cdHJldHVybiBwYXRoLnJlc29sdmUoX19kaXJuYW1lKTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gZ2V0U2VjcmV0cygpIHtcblx0dHJ5IHtcblx0XHRsZXQgc2VjcmV0c1BhdGggPSBwYXRoLmpvaW4oXG5cdFx0XHRnZXREaXJlY3RvcnlQYXRoKCksXG5cdFx0XHQnLi4vYmFja2VuZC9jb25maWcvc2VjcmV0cy5qc29uLmdwZydcblx0XHQpO1xuXHRcdGNvbnNvbGUubG9nKCdSZXNvbHZlZCBzZWNyZXRzIHBhdGg6Jywgc2VjcmV0c1BhdGgpOyAvLyBkZWJ1Z2dpbmcgbGluZSB0byB2ZXJpZnkgdGhlIGNvcnJlY3QgcGF0aFxuXHRcdGxldCBkZWNyeXB0ZWRTZWNyZXRzID0gZXhlY1N5bmMoXG5cdFx0XHRgc29wcyAtZCAtLW91dHB1dC10eXBlIGpzb24gJHtzZWNyZXRzUGF0aH1gXG5cdFx0KS50b1N0cmluZygpO1xuXHRcdHJldHVybiBKU09OLnBhcnNlKGRlY3J5cHRlZFNlY3JldHMpO1xuXHR9IGNhdGNoIChlcnIpIHtcblx0XHRjb25zb2xlLmVycm9yKCdFcnJvciByZXRyaWV2aW5nIHNlY3JldHMgZnJvbSBTT1BTOiAnLCBlcnIpO1xuXHRcdHRocm93IGVycjtcblx0fVxufVxuXG5leHBvcnQgZGVmYXVsdCBnZXRTZWNyZXRzO1xuIl19
