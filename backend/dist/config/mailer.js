import nodemailer from 'nodemailer';
import getSecrets from './secrets.js';
async function createTransporter() {
	let secrets = await getSecrets();
	let transporter = nodemailer.createTransport({
		host: secrets.EMAIL_HOST,
		port: secrets.EMAIL_PORT,
		secure: secrets.EMAIL_SECURE,
		auth: {
			user: process.env.EMAIL_USER,
			pass: secrets.SMTP_TOKEN
		}
	});
	return transporter;
}
let transporter = null;
async function getTransporter() {
	if (!transporter) {
		transporter = await createTransporter();
	}
	return transporter;
}
export { createTransporter, getTransporter };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbGVyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL2NvbmZpZy9tYWlsZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxVQUEyQixNQUFNLFlBQVksQ0FBQztBQUNyRCxPQUFPLFVBQVUsTUFBTSxXQUFXLENBQUM7QUFFbkMsS0FBSyxVQUFVLGlCQUFpQjtJQUMvQixJQUFJLE9BQU8sR0FBRyxNQUFNLFVBQVUsRUFBRSxDQUFDO0lBRWpDLElBQUksV0FBVyxHQUFHLFVBQVUsQ0FBQyxlQUFlLENBQUM7UUFDNUMsSUFBSSxFQUFFLE9BQU8sQ0FBQyxVQUFVO1FBQ3hCLElBQUksRUFBRSxPQUFPLENBQUMsVUFBVTtRQUN4QixNQUFNLEVBQUUsT0FBTyxDQUFDLFlBQVk7UUFDNUIsSUFBSSxFQUFFO1lBQ0wsSUFBSSxFQUFFLE9BQU8sQ0FBQyxHQUFHLENBQUMsVUFBb0I7WUFDdEMsSUFBSSxFQUFFLE9BQU8sQ0FBQyxVQUFVO1NBQ3hCO0tBQ0QsQ0FBQyxDQUFDO0lBRUgsT0FBTyxXQUFXLENBQUM7QUFDcEIsQ0FBQztBQUVELElBQUksV0FBVyxHQUF1QixJQUFJLENBQUM7QUFFM0MsS0FBSyxVQUFVLGNBQWM7SUFDNUIsSUFBSSxDQUFDLFdBQVcsRUFBRSxDQUFDO1FBQ2xCLFdBQVcsR0FBRyxNQUFNLGlCQUFpQixFQUFFLENBQUM7SUFDekMsQ0FBQztJQUNELE9BQU8sV0FBVyxDQUFDO0FBQ3BCLENBQUM7QUFFRCxPQUFPLEVBQUUsaUJBQWlCLEVBQUUsY0FBYyxFQUFFLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbm9kZW1haWxlciwgeyBUcmFuc3BvcnRlciB9IGZyb20gJ25vZGVtYWlsZXInO1xuaW1wb3J0IGdldFNlY3JldHMgZnJvbSAnLi9zZWNyZXRzJztcblxuYXN5bmMgZnVuY3Rpb24gY3JlYXRlVHJhbnNwb3J0ZXIoKTogUHJvbWlzZTxUcmFuc3BvcnRlcj4ge1xuXHRsZXQgc2VjcmV0cyA9IGF3YWl0IGdldFNlY3JldHMoKTtcblxuXHRsZXQgdHJhbnNwb3J0ZXIgPSBub2RlbWFpbGVyLmNyZWF0ZVRyYW5zcG9ydCh7XG5cdFx0aG9zdDogc2VjcmV0cy5FTUFJTF9IT1NULFxuXHRcdHBvcnQ6IHNlY3JldHMuRU1BSUxfUE9SVCxcblx0XHRzZWN1cmU6IHNlY3JldHMuRU1BSUxfU0VDVVJFLFxuXHRcdGF1dGg6IHtcblx0XHRcdHVzZXI6IHByb2Nlc3MuZW52LkVNQUlMX1VTRVIgYXMgc3RyaW5nLFxuXHRcdFx0cGFzczogc2VjcmV0cy5TTVRQX1RPS0VOXG5cdFx0fVxuXHR9KTtcblxuXHRyZXR1cm4gdHJhbnNwb3J0ZXI7XG59XG5cbmxldCB0cmFuc3BvcnRlcjogVHJhbnNwb3J0ZXIgfCBudWxsID0gbnVsbDtcblxuYXN5bmMgZnVuY3Rpb24gZ2V0VHJhbnNwb3J0ZXIoKTogUHJvbWlzZTxUcmFuc3BvcnRlcj4ge1xuXHRpZiAoIXRyYW5zcG9ydGVyKSB7XG5cdFx0dHJhbnNwb3J0ZXIgPSBhd2FpdCBjcmVhdGVUcmFuc3BvcnRlcigpO1xuXHR9XG5cdHJldHVybiB0cmFuc3BvcnRlcjtcbn1cblxuZXhwb3J0IHsgY3JlYXRlVHJhbnNwb3J0ZXIsIGdldFRyYW5zcG9ydGVyIH07XG4iXX0=
