import { BaseRouter } from './BaseRouter.mjs';
// *DEV-NOTE* need to create a test page to utilize this router
export class TestRouter extends BaseRouter {
	nodeEnv = this.envConfig.getEnvVariable('nodeEnv');
	constructor(
		logger,
		errorLogger,
		errorHandler,
		envConfig,
		cacheService,
		gatekeeperService,
		helmetService,
		JWTMiddleware,
		passportMiddleware
	) {
		super(
			logger,
			errorLogger,
			errorHandler,
			envConfig,
			cacheService,
			gatekeeperService,
			helmetService,
			JWTMiddleware,
			passportMiddleware
		);
		this.nodeEnv = this.envConfig.getEnvVariable('nodeEnv');
		this.setUpTestRoutes();
	}
	setUpTestRoutes() {
		if (this.nodeEnv === 'production') {
			this.router.use((_req, res) => {
				this.logger.info(
					'Test route accessed in production environment.'
				);
				res.status(404).json({
					message: 'Test routes are not available in production.'
				});
			});
		} else {
			this.router.connect('/test', this.testConnectRoute.bind(this));
			this.router.delete('/test', this.testDeleteRoute.bind(this));
			this.router.get('/test', this.testGetRoute.bind(this));
			this.router.head('/test', this.testHeadRoute.bind(this));
			this.router.options('/test', this.testOptionsRoute.bind(this));
			this.router.patch('/test', this.testPatchRoute.bind(this));
			this.router.post('/test', this.testPostRoute.bind(this));
			this.router.put('/test', this.testPutRoute.bind(this));
			this.router.trace('/test', this.testTraceRoute.bind(this));
		}
		this.router.use(this.handleTestRouteErrors.bind(this));
	}
	testConnectRoute(req, res, next) {
		try {
			this.logger.info('Test route accessed.');
			res.send('Test route is working!');
		} catch (error) {
			this.handleRouteError(error, req, res, next);
		}
	}
	testDeleteRoute(req, res, next) {
		try {
			this.logger.info('DELETE Test route accessed.');
			res.send('DELETE Test route is working!');
		} catch (error) {
			this.handleRouteError(error, req, res, next);
		}
	}
	testGetRoute(req, res, next) {
		try {
			this.logger.info('Test route accessed.');
			res.send('Test route is working!');
		} catch (error) {
			this.handleRouteError(error, req, res, next);
		}
	}
	testHeadRoute(req, res, next) {
		try {
			this.logger.info('Test route accessed.');
			res.send('Test route is working!');
		} catch (error) {
			this.handleRouteError(error, req, res, next);
		}
	}
	testOptionsRoute(req, res, next) {
		try {
			this.logger.info('Test route accessed.');
			res.send('Test route is working!');
		} catch (error) {
			this.handleRouteError(error, req, res, next);
		}
	}
	testPatchRoute(req, res, next) {
		try {
			this.logger.info('Test route accessed.');
			res.send('Test route is working!');
		} catch (error) {
			this.handleRouteError(error, req, res, next);
		}
	}
	testPostRoute(req, res, next) {
		try {
			this.logger.info('POST Test route accessed.');
			res.send('POST Test route is working!');
		} catch (error) {
			this.handleRouteError(error, req, res, next);
		}
	}
	testPutRoute(req, res, next) {
		try {
			this.logger.info('PUT Test route accessed.');
			res.send('PUT Test route is working!');
		} catch (error) {
			this.handleRouteError(error, req, res, next);
		}
	}
	testTraceRoute(req, res, next) {
		try {
			this.logger.info('Test route accessed.');
			res.send('Test route is working!');
		} catch (error) {
			this.handleRouteError(error, req, res, next);
		}
	}
	handleTestRouteErrors(error, req, res, next) {
		if (error instanceof Error) {
			this.logger.error('Unexpected error on test route');
			this.errorHandler.expressErrorHandler()(error, req, res, next);
		} else {
			this.logger.error(
				'Unexpected non-error thrown on test route',
				error
			);
			this.errorHandler.handleError({
				error,
				req
			});
		}
		res.status(500).json({
			error: 'Internal routing error on test route'
		});
	}
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVGVzdFJvdXRlci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9yb3V0ZXJzL1Rlc3RSb3V0ZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQ0EsT0FBTyxFQUFFLFVBQVUsRUFBRSxNQUFNLGNBQWMsQ0FBQztBQWExQywrREFBK0Q7QUFFL0QsTUFBTSxPQUFPLFVBQVcsU0FBUSxVQUFVO0lBQ2pDLE9BQU8sR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLGNBQWMsQ0FBQyxTQUFTLENBQUMsQ0FBQztJQUUzRCxZQUNDLE1BQWlDLEVBQ2pDLFdBQXdDLEVBQ3hDLFlBQTBDLEVBQzFDLFNBQW9DLEVBQ3BDLFlBQW1DLEVBQ25DLGlCQUE2QyxFQUM3QyxhQUErQyxFQUMvQyxhQUFnRCxFQUNoRCxrQkFBMEQ7UUFFMUQsS0FBSyxDQUNKLE1BQU0sRUFDTixXQUFXLEVBQ1gsWUFBWSxFQUNaLFNBQVMsRUFDVCxZQUFZLEVBQ1osaUJBQWlCLEVBQ2pCLGFBQWEsRUFDYixhQUFhLEVBQ2Isa0JBQWtCLENBQ2xCLENBQUM7UUFDRixJQUFJLENBQUMsT0FBTyxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsY0FBYyxDQUFDLFNBQVMsQ0FBQyxDQUFDO1FBQ3hELElBQUksQ0FBQyxlQUFlLEVBQUUsQ0FBQztJQUN4QixDQUFDO0lBRU8sZUFBZTtRQUN0QixJQUFJLElBQUksQ0FBQyxPQUFPLEtBQUssWUFBWSxFQUFFLENBQUM7WUFDbkMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFhLEVBQUUsR0FBYSxFQUFFLEVBQUU7Z0JBQ2hELElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUNmLGdEQUFnRCxDQUNoRCxDQUFDO2dCQUNGLEdBQUcsQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDO29CQUNwQixPQUFPLEVBQUUsOENBQThDO2lCQUN2RCxDQUFDLENBQUM7WUFDSixDQUFDLENBQUMsQ0FBQztR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UUFFbEIsSUFBSSxLQUFLLFlBQVksS0FBSyxFQUFFLENBQUM7WUFDNUIsSUFBSSxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsZ0NBQWdDLENBQUMsQ0FBQztZQUNwRCxJQUFJLENBQUMsWUFBWSxDQUFDLG1CQUFtQixFQUFFLENBQUMsS0FBSyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsSUFBSSxDQUFDLENBQUM7UUFDaEUsQ0FBQzthQUFNLENBQUM7WUFDUCxJQUFJLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FDaEIsMkNBQTJDLEVBQzNDLEtBQUssQ0FDTCxDQUFDO1lBQ0YsSUFBSSxDQUFDLFlBQVksQ0FBQyxXQUFXLENBQUM7Z0JBQzdCLEtBQUssRUFBRSxLQUFlO2dCQUN0QixHQUFHO2FBQ0gsQ0FBQyxDQUFDO1FBQ0osQ0FBQztRQUNELEdBQUcsQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDO1lBQ3BCLEtBQUssRUFBRSxzQ0FBc0M7U0FDN0MsQ0FBQyxDQUFDO0lBQ0osQ0FBQztDQUNEIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUmVxdWVzdCwgUmVzcG9uc2UsIE5leHRGdW5jdGlvbiB9IGZyb20gJ2V4cHJlc3MnO1xuaW1wb3J0IHsgQmFzZVJvdXRlciB9IGZyb20gJy4vQmFzZVJvdXRlcic7XG5pbXBvcnQge1xuXHRBcHBMb2dnZXJTZXJ2aWNlSW50ZXJmYWNlLFxuXHRDYWNoZVNlcnZpY2VJbnRlcmZhY2UsXG5cdEVudkNvbmZpZ1NlcnZpY2VJbnRlcmZhY2UsXG5cdEVycm9ySGFuZGxlclNlcnZpY2VJbnRlcmZhY2UsXG5cdEVycm9yTG9nZ2VyU2VydmljZUludGVyZmFjZSxcblx0R2F0ZWtlZXBlclNlcnZpY2VJbnRlcmZhY2UsXG5cdEhlbG1ldE1pZGRsZXdhcmVTZXJ2aWNlSW50ZXJmYWNlLFxuXHRKV1RBdXRoTWlkZGxld2FyZVNlcnZpY2VJbnRlcmZhY2UsXG5cdFBhc3Nwb3J0QXV0aE1pZGRsZXdhcmVTZXJ2aWNlSW50ZXJmYWNlXG59IGZyb20gJy4uL2luZGV4L2ludGVyZmFjZXMvc2VydmljZXMnO1xuXG4vLyAqREVWLU5PVEUqIG5lZWQgdG8gY3JlYXRlIGEgdGVzdCBwYWdlIHRvIHV0aWxpemUgdGhpcyByb3V0ZXJcblxuZXhwb3J0IGNsYXNzIFRlc3RSb3V0ZXIgZXh0ZW5kcyBCYXNlUm91dGVyIHtcblx0cHJpdmF0ZSBub2RlRW52ID0gdGhpcy5lbnZDb25maWcuZ2V0RW52VmFyaWFibGUoJ25vZGVFbnYnKTtcblxuXHRwcml2YXRlIGNvbnN0cnVjdG9yKFxuXHRcdGxvZ2dlcjogQXBwTG9nZ2VyU2VydmljZUludGVyZmFjZSxcblx0XHRlcnJvckxvZ2dlcjogRXJyb3JMb2dnZXJTZXJ2aWNlSW50ZXJmYWNlLFxuXHRcdGVycm9ySGFuZGxlcjogRXJyb3JIYW5kbGVyU2VydmljZUludGVyZmFjZSxcblx0XHRlbnZDb25maWc6IEVudkNvbmZpZ1NlcnZpY2VJbnRlcmZhY2UsXG5cdFx0Y2FjaGVTZXJ2aWNlOiBDYWNoZVNlcnZpY2VJbnRlcmZhY2UsXG5cdFx0Z2F0ZWtlZXBlclNlcnZpY2U6IEdhdGVrZWVwZXJTZXJ2aWNlSW50ZXJmYWNlLFxuXHRcdGhlbG1ldFNlcnZpY2U6IEhlbG1ldE1pZGRsZXdhcmVTZXJ2aWNlSW50ZXJmYWNlLFxuXHRcdEpXVE1pZGRsZXdhcmU6IEpXVEF1dGhNaWRkbGV3YXJlU2VydmljZUludGVyZmFjZSxcblx0XHRwYXNzcG9ydE1pZGRsZXdhcmU6IFBhc3Nwb3J0QXV0aE1pZGRsZXdhcmVTZXJ2aWNlSW50ZXJmYWNlXG5cdCkge1xuXHRcdHN1cGVyKFxuXHRcdFx0bG9nZ2VyLFxuXHRcdFx0ZXJyb3JMb2dnZXIsXG5cdFx0XHRlcnJvckhhbmRsZXIsXG5cdFx0XHRlbnZDb25maWcsXG5cdFx0XHRjYWNoZVNlcnZpY2UsXG5cdFx0XHRnYXRla2VlcGVyU2VydmljZSxcblx0XHRcdGhlbG1ldFNlcnZpY2UsXG5cdFx0XHRKV1RNaWRkbGV3YXJlLFxuXHRcdFx0cGFzc3BvcnRNaWRkbGV3YXJlXG5cdFx0KTtcblx0XHR0aGlzLm5vZGVFbnYgPSB0aGlzLmVudkNvbmZpZy5nZXRFbnZWYXJpYWJsZSgnbm9kZUVudicpO1xuXHRcdHRoaXMuc2V0VXBUZXN0Um91dGVzKCk7XG5cdH1cblxuXHRwcml2YXRlIHNldFVwVGVzdFJvdXRlcygpOiB2b2lkIHtcblx0XHRpZiAodGhpcy5ub2RlRW52ID09PSAncHJvZHVjdGlvbicpIHtcblx0XHRcdHRoaXMucm91dGVyLnVzZSgoX3JlcTogUmVxdWVzdCwgcmVzOiBSZXNwb25zZSkgPT4ge1xuXHRcdFx0XHR0aGlzLmxvZ2dlci5pbmZvKFxuXHRcdFx0XHRcdCdUZXN0IHJvdXRlIGFjY2Vzc2VkIGluIHByb2R1Y3Rpb24gZW52aXJvbm1lbnQuJ1xuXHRcdFx0XHQpO1xuXHRcdFx0XHRyZXMuc3RhdHVzKDQwNCkuanNvbih7XG5cdFx0XHRcdFx0bWVzc2FnZTogJ1Rlc3Qgcm91dGVzIGFyZSBub3QgYXZhaWxhYmxlIGluIHByb2R1Y3Rpb24uJ1xuXHRcdFx0XHR9KTtcblx0XHRcdH0pO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR0aGlzLnJvdXRlci5jb25uZWN0KCcvdGVzdCcsIHRoaXMudGVzdENvbm5lY3RSb3V0ZS5iaW5kKHRoaXMpKTtcblx0XHRcdHRoaXMucm91dGVyLmRlbGV0ZSgnL3Rlc3QnLCB0aGlzLnRlc3REZWxldGVSb3V0ZS5iaW5kKHRoaXMpKTtcblx0XHRcdHRoaXMucm91dGVyLmdldCgnL3Rlc3QnLCB0aGlzLnRlc3RHZXRSb3V0ZS5iaW5kKHRoaXMpKTtcblx0XHRcdHRoaXMucm91dGVyLmhlYWQoJy90ZXN0JywgdGhpcy50ZXN0SGVhZFJvdXRlLmJpbmQodGhpcykpO1xuXHRcdFx0dGhpcy5yb3V0ZXIub3B0aW9ucygnL3Rlc3QnLCB0aGlzLnRlc3RPcHRpb25zUm91dGUuYmluZCh0aGlzKSk7XG5cdFx0XHR0aGlzLnJvdXRlci5wYXRjaCgnL3Rlc3QnLCB0aGlzLnRlc3RQYXRjaFJvdXRlLmJpbmQodGhpcykpO1xuXHRcdFx0dGhpcy5yb3V0ZXIucG9zdCgnL3Rlc3QnLCB0aGlzLnRlc3RQb3N0Um91dGUuYmluZCh0aGlzKSk7XG5cdFx0XHR0aGlzLnJvdXRlci5wdXQoJy90ZXN0JywgdGhpcy50ZXN0UHV0Um91dGUuYmluZCh0aGlzKSk7XG5cdFx0XHR0aGlzLnJvdXRlci50cmFjZSgnL3Rlc3QnLCB0aGlzLnRlc3RUcmFjZVJvdXRlLmJpbmQodGhpcykpO1xuXHRcdH1cblxuXHRcdHRoaXMucm91dGVyLnVzZSh0aGlzLmhhbmRsZVRlc3RSb3V0ZUVycm9ycy5iaW5kKHRoaXMpKTtcblx0fVxuXG5cdHByaXZhdGUgdGVzdENvbm5lY3RSb3V0ZShcblx0XHRyZXE6IFJlcXVlc3QsXG5cdFx0cmVzOiBSZXNwb25zZSxcblx0XHRuZXh0OiBOZXh0RnVuY3Rpb25cblx0KTogdm9pZCB7XG5cdFx0dHJ5IHtcblx0XHRcdHRoaXMubG9nZ2VyLmluZm8oJ1Rlc3Qgcm91dGUgYWNjZXNzZWQuJyk7XG5cdFx0XHRyZXMuc2VuZCgnVGVzdCByb3V0ZSBpcyB3b3JraW5nIScpO1xuXHRcdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0XHR0aGlzLmhhbmRsZVJvdXRlRXJyb3IoZXJyb3IsIHJlcSwgcmVzLCBuZXh0KTtcblx0XHR9XG5cdH1cblxuXHRwcml2YXRlIHRlc3REZWxldGVSb3V0ZShcblx0XHRyZXE6IFJlcXVlc3QsXG5cdFx0cmVzOiBSZXNwb25zZSxcblx0XHRuZXh0OiBOZXh0RnVuY3Rpb25cblx0KTogdm9pZCB7XG5cdFx0dHJ5IHtcblx0XHRcdHRoaXMubG9nZ2VyLmluZm8oJ0RFTEVURSBUZXN0IHJvdXRlIGFjY2Vzc2VkLicpO1xuXHRcdFx0cmVzLnNlbmQoJ0RFTEVURSBUZXN0IHJvdXRlIGlzIHdvcmtpbmchJyk7XG5cdFx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRcdHRoaXMuaGFuZGxlUm91dGVFcnJvcihlcnJvciwgcmVxLCByZXMsIG5leHQpO1xuXHRcdH1cblx0fVxuXG5cdHByaXZhdGUgdGVzdEdldFJvdXRlKFxuXHRcdHJlcTogUmVxdWVzdCxcblx0XHRyZXM6IFJlc3BvbnNlLFxuXHRcdG5leHQ6IE5leHRGdW5jdGlvblxuXHQpOiB2b2lkIHtcblx0XHR0cnkge1xuXHRcdFx0dGhpcy5sb2dnZXIuaW5mbygnVGVzdCByb3V0ZSBhY2Nlc3NlZC4nKTtcblx0XHRcdHJlcy5zZW5kKCdUZXN0IHJvdXRlIGlzIHdvcmtpbmchJyk7XG5cdFx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRcdHRoaXMuaGFuZGxlUm91dGVFcnJvcihlcnJvciwgcmVxLCByZXMsIG5leHQpO1xuXHRcdH1cblx0fVxuXG5cdHByaXZhdGUgdGVzdEhlYWRSb3V0ZShcblx0XHRyZXE6IFJlcXVlc3QsXG5cdFx0cmVzOiBSZXNwb25zZSxcblx0XHRuZXh0OiBOZXh0RnVuY3Rpb25cblx0KTogdm9pZCB7XG5cdFx0dHJ5IHtcblx0XHRcdHRoaXMubG9nZ2VyLmluZm8oJ1Rlc3Qgcm91dGUgYWNjZXNzZWQuJyk7XG5cdFx0XHRyZXMuc2VuZCgnVGVzdCByb3V0ZSBpcyB3b3JraW5nIScpO1xuXHRcdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0XHR0aGlzLmhhbmRsZVJvdXRlRXJyb3IoZXJyb3IsIHJlcSwgcmVzLCBuZXh0KTtcblx0XHR9XG5cdH1cblxuXHRwcml2YXRlIHRlc3RPcHRpb25zUm91dGUoXG5cdFx0cmVxOiBSZXF1ZXN0LFxuXHRcdHJlczogUmVzcG9uc2UsXG5cdFx0bmV4dDogTmV4dEZ1bmN0aW9uXG5cdCk6IHZvaWQge1xuXHRcdHRyeSB7XG5cdFx0XHR0aGlzLmxvZ2dlci5pbmZvKCdUZXN0IHJvdXRlIGFjY2Vzc2VkLicpO1xuXHRcdFx0cmVzLnNlbmQoJ1Rlc3Qgcm91dGUgaXMgd29ya2luZyEnKTtcblx0XHR9IGNhdGNoIChlcnJvcikge1xuXHRcdFx0dGhpcy5oYW5kbGVSb3V0ZUVycm9yKGVycm9yLCByZXEsIHJlcywgbmV4dCk7XG5cdFx0fVxuXHR9XG5cblx0cHJpdmF0ZSB0ZXN0UGF0Y2hSb3V0ZShcblx0XHRyZXE6IFJlcXVlc3QsXG5cdFx0cmVzOiBSZXNwb25zZSxcblx0XHRuZXh0OiBOZXh0RnVuY3Rpb25cblx0KTogdm9pZCB7XG5cdFx0dHJ5IHtcblx0XHRcdHRoaXMubG9nZ2VyLmluZm8oJ1Rlc3Qgcm91dGUgYWNjZXNzZWQuJyk7XG5cdFx0XHRyZXMuc2VuZCgnVGVzdCByb3V0ZSBpcyB3b3JraW5nIScpO1xuXHRcdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0XHR0aGlzLmhhbmRsZVJvdXRlRXJyb3IoZXJyb3IsIHJlcSwgcmVzLCBuZXh0KTtcblx0XHR9XG5cdH1cblxuXHRwcml2YXRlIHRlc3RQb3N0Um91dGUoXG5cdFx0cmVxOiBSZXF1ZXN0LFxuXHRcdHJlczogUmVzcG9uc2UsXG5cdFx0bmV4dDogTmV4dEZ1bmN0aW9uXG5cdCk6IHZvaWQge1xuXHRcdHRyeSB7XG5cdFx0XHR0aGlzLmxvZ2dlci5pbmZvKCdQT1NUIFRlc3Qgcm91dGUgYWNjZXNzZWQuJyk7XG5cdFx0XHRyZXMuc2VuZCgnUE9TVCBUZXN0IHJvdXRlIGlzIHdvcmtpbmchJyk7XG5cdFx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRcdHRoaXMuaGFuZGxlUm91dGVFcnJvcihlcnJvciwgcmVxLCByZXMsIG5leHQpO1xuXHRcdH1cblx0fVxuXG5cdHByaXZhdGUgdGVzdFB1dFJvdXRlKFxuXHRcdHJlcTogUmVxdWVzdCxcblx0XHRyZXM6IFJlc3BvbnNlLFxuXHRcdG5leHQ6IE5leHRGdW5jdGlvblxuXHQpOiB2b2lkIHtcblx0XHR0cnkge1xuXHRcdFx0dGhpcy5sb2dnZXIuaW5mbygnUFVUIFRlc3Qgcm91dGUgYWNjZXNzZWQuJyk7XG5cdFx0XHRyZXMuc2VuZCgnUFVUIFRlc3Qgcm91dGUgaXMgd29ya2luZyEnKTtcblx0XHR9IGNhdGNoIChlcnJvcikge1xuXHRcdFx0dGhpcy5oYW5kbGVSb3V0ZUVycm9yKGVycm9yLCByZXEsIHJlcywgbmV4dCk7XG5cdFx0fVxuXHR9XG5cblx0cHJpdmF0ZSB0ZXN0VHJhY2VSb3V0ZShcblx0XHRyZXE6IFJlcXVlc3QsXG5cdFx0cmVzOiBSZXNwb25zZSxcblx0XHRuZXh0OiBOZXh0RnVuY3Rpb25cblx0KTogdm9pZCB7XG5cdFx0dHJ5IHtcblx0XHRcdHRoaXMubG9nZ2VyLmluZm8oJ1Rlc3Qgcm91dGUgYWNjZXNzZWQuJyk7XG5cdFx0XHRyZXMuc2VuZCgnVGVzdCByb3V0ZSBpcyB3b3JraW5nIScpO1xuXHRcdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0XHR0aGlzLmhhbmRsZVJvdXRlRXJyb3IoZXJyb3IsIHJlcSwgcmVzLCBuZXh0KTtcblx0XHR9XG5cdH1cblxuXHRwcml2YXRlIGhhbmRsZVRlc3RSb3V0ZUVycm9ycyhcblx0XHRlcnJvcjogdW5rbm93bixcblx0XHRyZXE6IFJlcXVlc3QsXG5cdFx0cmVzOiBSZXNwb25zZSxcblx0XHRuZXh0OiBOZXh0RnVuY3Rpb25cblx0KTogdm9pZCB7XG5cdFx0aWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpIHtcblx0XHRcdHRoaXMubG9nZ2VyLmVycm9yKCdVbmV4cGVjdGVkIGVycm9yIG9uIHRlc3Qgcm91dGUnKTtcblx0XHRcdHRoaXMuZXJyb3JIYW5kbGVyLmV4cHJlc3NFcnJvckhhbmRsZXIoKShlcnJvciwgcmVxLCByZXMsIG5leHQpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR0aGlzLmxvZ2dlci5lcnJvcihcblx0XHRcdFx0J1VuZXhwZWN0ZWQgbm9uLWVycm9yIHRocm93biBvbiB0ZXN0IHJvdXRlJyxcblx0XHRcdFx0ZXJyb3Jcblx0XHRcdCk7XG5cdFx0XHR0aGlzLmVycm9ySGFuZGxlci5oYW5kbGVFcnJvcih7XG5cdFx0XHRcdGVycm9yOiBlcnJvciBhcyBzdHJpbmcsXG5cdFx0XHRcdHJlcVxuXHRcdFx0fSk7XG5cdFx0fVxuXHRcdHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcblx0XHRcdGVycm9yOiAnSW50ZXJuYWwgcm91dGluZyBlcnJvciBvbiB0ZXN0IHJvdXRlJ1xuXHRcdH0pO1xuXHR9XG59XG4iXX0=
