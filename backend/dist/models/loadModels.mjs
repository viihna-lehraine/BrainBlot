import { validateDependencies } from '../utils/validateDependencies';
import { processError } from '../utils/processError';
import createAuditLogModel from './AuditLog';
import createDataShareOptionsModel from './DataShareOptions';
import createDeviceModel from './Device';
import createFailedLoginAttemptsModel from './FailedLoginAttempts';
import createFeatureRequestModel from './FeatureRequest';
import createFeedbackSurveyModel from './FeedbackSurvey';
import createGuestbookEntryModel from './GuestbookEntry';
import createMultiFactorAuthSetupModel from './MultiFactorAuthSetup';
import createRecoveryMethodModel from './RecoveryMethod';
import createSecurityEventModel from './SecurityEvent';
import createSupportRequestModel from './SupportRequest';
import createUserMfaModel from './UserMfa';
import createUserModel from './User';
import createUserSessionModel from './UserSession';
export async function loadModels(sequelize, logger) {
	validateDependencies(
		[
			{ name: 'sequelize', instance: sequelize },
			{ name: 'logger', instance: logger }
		],
		logger || console
	);
	try {
		const models = {
			AuditLog: createAuditLogModel(sequelize, logger),
			DataShareOptions: createDataShareOptionsModel(sequelize, logger),
			Device: createDeviceModel(sequelize, logger),
			FailedLoginAttempts: createFailedLoginAttemptsModel(
				sequelize,
				logger
			),
			FeatureRequest: createFeatureRequestModel(sequelize, logger),
			FeedbackSurvey: createFeedbackSurveyModel(sequelize, logger),
			GuestbookEntry: createGuestbookEntryModel(sequelize, logger),
			MultiFactorAuthSetup: createMultiFactorAuthSetupModel(
				sequelize,
				logger
			),
			RecoveryMethod: createRecoveryMethodModel(sequelize, logger),
			SecurityEvent: createSecurityEventModel(sequelize, logger),
			SupportRequest: createSupportRequestModel(sequelize, logger),
			User: createUserModel(sequelize, logger),
			UserMfa: createUserMfaModel(sequelize, logger),
			UserSession: createUserSessionModel(sequelize, logger)
		};
		models.User.hasMany(models.AuditLog, {
			foreignKey: 'id',
			as: 'auditLogs'
		});
		models.User.hasMany(models.FailedLoginAttempts, {
			foreignKey: 'id',
			as: 'failedLoginAttempts'
		});
		models.User.hasMany(models.GuestbookEntry, {
			foreignKey: 'id',
			as: 'guestbookEntries'
		});
		models.User.hasMany(models.RecoveryMethod, {
			foreignKey: 'id',
			as: 'recoveryMethods'
		});
		models.User.hasMany(models.SecurityEvent, {
			foreignKey: 'id',
			as: 'securityEvents'
		});
		models.User.hasMany(models.SupportRequest, {
			foreignKey: 'id',
			as: 'supportRequests'
		});
		models.User.hasMany(models.UserSession, {
			foreignKey: 'id',
			as: 'sessions'
		});
		models.User.hasOne(models.UserMfa, { foreignKey: 'id', as: 'user' });
		models.AuditLog.belongsTo(models.User, {
			foreignKey: 'id',
			as: 'user'
		});
		models.DataShareOptions.belongsTo(models.User, {
			foreignKey: 'id',
			as: 'user'
		});
		models.Device.belongsTo(models.User, { foreignKey: 'id', as: 'user' });
		models.FailedLoginAttempts.belongsTo(models.User, {
			foreignKey: 'id',
			as: 'user'
		});
		models.FeatureRequest.belongsTo(models.User, {
			foreignKey: 'id',
			as: 'user'
		});
		models.GuestbookEntry.belongsTo(models.User, {
			foreignKey: 'id',
			as: 'user'
		});
		models.MultiFactorAuthSetup.belongsTo(models.User, {
			foreignKey: 'id',
			as: 'user'
		});
		models.RecoveryMethod.belongsTo(models.User, {
			foreignKey: 'id',
			as: 'user'
		});
		models.SecurityEvent.belongsTo(models.User, {
			foreignKey: 'id',
			as: 'user'
		});
		models.SupportRequest.belongsTo(models.User, {
			foreignKey: 'id',
			as: 'user'
		});
		models.UserMfa.belongsTo(models.User, { foreignKey: 'id', as: 'user' });
		models.UserSession.belongsTo(models.User, {
			foreignKey: 'id',
			as: 'user'
		});
		return models;
	} catch (error) {
		processError(error, logger || console);
		throw error;
	}
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibG9hZE1vZGVscy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9tb2RlbHMvbG9hZE1vZGVscy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFFQSxPQUFPLEVBQUUsb0JBQW9CLEVBQUUsTUFBTSwrQkFBK0IsQ0FBQztBQUNyRSxPQUFPLEVBQUUsWUFBWSxFQUFFLE1BQU0sdUJBQXVCLENBQUM7QUFDckQsT0FBTyxtQkFBbUIsTUFBTSxZQUFZLENBQUM7QUFDN0MsT0FBTywyQkFBMkIsTUFBTSxvQkFBb0IsQ0FBQztBQUM3RCxPQUFPLGlCQUFpQixNQUFNLFVBQVUsQ0FBQztBQUN6QyxPQUFPLDhCQUE4QixNQUFNLHVCQUF1QixDQUFDO0FBQ25FLE9BQU8seUJBQXlCLE1BQU0sa0JBQWtCLENBQUM7QUFDekQsT0FBTyx5QkFBeUIsTUFBTSxrQkFBa0IsQ0FBQztBQUN6RCxPQUFPLHlCQUF5QixNQUFNLGtCQUFrQixDQUFDO0FBQ3pELE9BQU8sK0JBQStCLE1BQU0sd0JBQXdCLENBQUM7QUFDckUsT0FBTyx5QkFBeUIsTUFBTSxrQkFBa0IsQ0FBQztBQUN6RCxPQUFPLHdCQUF3QixNQUFNLGlCQUFpQixDQUFDO0FBQ3ZELE9BQU8seUJBQXlCLE1BQU0sa0JBQWtCLENBQUM7QUFDekQsT0FBTyxrQkFBa0IsTUFBTSxXQUFXLENBQUM7QUFDM0MsT0FBTyxlQUFlLE1BQU0sUUFBUSxDQUFDO0FBQ3JDLE9BQU8sc0JBQXNCLE1BQU0sZUFBZSxDQUFDO0FBbUJuRCxNQUFNLENBQUMsS0FBSyxVQUFVLFVBQVUsQ0FDL0IsU0FBb0IsRUFDcEIsTUFBYztJQUVkLG9CQUFvQixDQUNuQjtRQUNDLEVBQUUsSUFBSSxFQUFFLFdBQVcsRUFBRSxRQUFRLEVBQUUsU0FBUyxFQUFFO1FBQzFDLEVBQUUsSUFBSSxFQUFFLFFBQVEsRUFBRSxRQUFRLEVBQUUsTUFBTSxFQUFFO0tBQ3BDLEVBQ0QsTUFBTSxJQUFJLE9BQU8sQ0FDakIsQ0FBQztJQUNG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QzVDLFVBQVUsRUFBRSxJQUFJO1lBQ2hCLEVBQUUsRUFBRSxNQUFNO1NBQ1YsQ0FBQyxDQUFDO1FBQ0gsTUFBTSxDQUFDLE9BQU8sQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLElBQUksRUFBRSxFQUFFLFVBQVUsRUFBRSxJQUFJLEVBQUUsRUFBRSxFQUFFLE1BQU0sRUFBRSxDQUFDLENBQUM7UUFDeEUsTUFBTSxDQUFDLFdBQVcsQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLElBQUksRUFBRTtZQUN6QyxVQUFVLEVBQUUsSUFBSTtZQUNoQixFQUFFLEVBQUUsTUFBTTtTQUNWLENBQUMsQ0FBQztRQUVILE9BQU8sTUFBTSxDQUFDO0lBQ2YsQ0FBQztJQUFDLE9BQU8sS0FBSyxFQUFFLENBQUM7UUFDaEIsWUFBWSxDQUFDLEtBQUssRUFBRSxNQUFNLElBQUksT0FBTyxDQUFDLENBQUM7UUFDdkMsTUFBTSxLQUFLLENBQUM7SUFDYixDQUFDO0FBQ0YsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFNlcXVlbGl6ZSB9IGZyb20gJ3NlcXVlbGl6ZSc7XG5pbXBvcnQgeyBMb2dnZXIgfSBmcm9tICcuLi9jb25maWcvbG9nZ2VyJztcbmltcG9ydCB7IHZhbGlkYXRlRGVwZW5kZW5jaWVzIH0gZnJvbSAnLi4vdXRpbHMvdmFsaWRhdGVEZXBlbmRlbmNpZXMnO1xuaW1wb3J0IHsgcHJvY2Vzc0Vycm9yIH0gZnJvbSAnLi4vdXRpbHMvcHJvY2Vzc0Vycm9yJztcbmltcG9ydCBjcmVhdGVBdWRpdExvZ01vZGVsIGZyb20gJy4vQXVkaXRMb2cnO1xuaW1wb3J0IGNyZWF0ZURhdGFTaGFyZU9wdGlvbnNNb2RlbCBmcm9tICcuL0RhdGFTaGFyZU9wdGlvbnMnO1xuaW1wb3J0IGNyZWF0ZURldmljZU1vZGVsIGZyb20gJy4vRGV2aWNlJztcbmltcG9ydCBjcmVhdGVGYWlsZWRMb2dpbkF0dGVtcHRzTW9kZWwgZnJvbSAnLi9GYWlsZWRMb2dpbkF0dGVtcHRzJztcbmltcG9ydCBjcmVhdGVGZWF0dXJlUmVxdWVzdE1vZGVsIGZyb20gJy4vRmVhdHVyZVJlcXVlc3QnO1xuaW1wb3J0IGNyZWF0ZUZlZWRiYWNrU3VydmV5TW9kZWwgZnJvbSAnLi9GZWVkYmFja1N1cnZleSc7XG5pbXBvcnQgY3JlYXRlR3Vlc3Rib29rRW50cnlNb2RlbCBmcm9tICcuL0d1ZXN0Ym9va0VudHJ5JztcbmltcG9ydCBjcmVhdGVNdWx0aUZhY3RvckF1dGhTZXR1cE1vZGVsIGZyb20gJy4vTXVsdGlGYWN0b3JBdXRoU2V0dXAnO1xuaW1wb3J0IGNyZWF0ZVJlY292ZXJ5TWV0aG9kTW9kZWwgZnJvbSAnLi9SZWNvdmVyeU1ldGhvZCc7XG5pbXBvcnQgY3JlYXRlU2VjdXJpdHlFdmVudE1vZGVsIGZyb20gJy4vU2VjdXJpdHlFdmVudCc7XG5pbXBvcnQgY3JlYXRlU3VwcG9ydFJlcXVlc3RNb2RlbCBmcm9tICcuL1N1cHBvcnRSZXF1ZXN0JztcbmltcG9ydCBjcmVhdGVVc2VyTWZhTW9kZWwgZnJvbSAnLi9Vc2VyTWZhJztcbmltcG9ydCBjcmVhdGVVc2VyTW9kZWwgZnJvbSAnLi9Vc2VyJztcbmltcG9ydCBjcmVhdGVVc2VyU2Vzc2lvbk1vZGVsIGZyb20gJy4vVXNlclNlc3Npb24nO1xuXG5leHBvcnQgaW50ZXJmYWNlIE1vZGVscyB7XG5cdEF1ZGl0TG9nOiBSZXR1cm5UeXBlPHR5cGVvZiBjcmVhdGVBdWRpdExvZ01vZGVsPjtcblx0RGF0YVNoYXJlT3B0aW9uczogUmV0dXJuVHlwZTx0eXBlb2YgY3JlYXRlRGF0YVNoYXJlT3B0aW9uc01vZGVsPjtcblx0RGV2aWNlOiBSZXR1cm5UeXBlPHR5cGVvZiBjcmVhdGVEZXZpY2VNb2RlbD47XG5cdEZhaWxlZExvZ2luQXR0ZW1wdHM6IFJldHVyblR5cGU8dHlwZW9mIGNyZWF0ZUZhaWxlZExvZ2luQXR0ZW1wdHNNb2RlbD47XG5cdEZlYXR1cmVSZXF1ZXN0OiBSZXR1cm5UeXBlPHR5cGVvZiBjcmVhdGVGZWF0dXJlUmVxdWVzdE1vZGVsPjtcblx0RmVlZGJhY2tTdXJ2ZXk6IFJldHVyblR5cGU8dHlwZW9mIGNyZWF0ZUZlZWRiYWNrU3VydmV5TW9kZWw+O1xuXHRHdWVzdGJvb2tFbnRyeTogUmV0dXJuVHlwZTx0eXBlb2YgY3JlYXRlR3Vlc3Rib29rRW50cnlNb2RlbD47XG5cdE11bHRpRmFjdG9yQXV0aFNldHVwOiBSZXR1cm5UeXBlPHR5cGVvZiBjcmVhdGVNdWx0aUZhY3RvckF1dGhTZXR1cE1vZGVsPjtcblx0UmVjb3ZlcnlNZXRob2Q6IFJldHVyblR5cGU8dHlwZW9mIGNyZWF0ZVJlY292ZXJ5TWV0aG9kTW9kZWw+O1xuXHRTZWN1cml0eUV2ZW50OiBSZXR1cm5UeXBlPHR5cGVvZiBjcmVhdGVTZWN1cml0eUV2ZW50TW9kZWw+O1xuXHRTdXBwb3J0UmVxdWVzdDogUmV0dXJuVHlwZTx0eXBlb2YgY3JlYXRlU3VwcG9ydFJlcXVlc3RNb2RlbD47XG5cdFVzZXI6IFJldHVyblR5cGU8dHlwZW9mIGNyZWF0ZVVzZXJNb2RlbD47XG5cdFVzZXJNZmE6IFJldHVyblR5cGU8dHlwZW9mIGNyZWF0ZVVzZXJNZmFNb2RlbD47XG5cdFVzZXJTZXNzaW9uOiBSZXR1cm5UeXBlPHR5cGVvZiBjcmVhdGVVc2VyU2Vzc2lvbk1vZGVsPjtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGxvYWRNb2RlbHMoXG5cdHNlcXVlbGl6ZTogU2VxdWVsaXplLFxuXHRsb2dnZXI6IExvZ2dlclxuKTogUHJvbWlzZTxNb2RlbHM+IHtcblx0dmFsaWRhdGVEZXBlbmRlbmNpZXMoXG5cdFx0W1xuXHRcdFx0eyBuYW1lOiAnc2VxdWVsaXplJywgaW5zdGFuY2U6IHNlcXVlbGl6ZSB9LFxuXHRcdFx0eyBuYW1lOiAnbG9nZ2VyJywgaW5zdGFuY2U6IGxvZ2dlciB9XG5cdFx0XSxcblx0XHRsb2dnZXIgfHwgY29uc29sZVxuXHQpO1xuXHR0cnkge1xuXHRcdGNvbnN0IG1vZGVsczogTW9kZWxzID0ge1xuXHRcdFx0QXVkaXRMb2c6IGNyZWF0ZUF1ZGl0TG9nTW9kZWwoc2VxdWVsaXplLCBsb2dnZXIpLFxuXHRcdFx0RGF0YVNoYXJlT3B0aW9uczogY3JlYXRlRGF0YVNoYXJlT3B0aW9uc01vZGVsKHNlcXVlbGl6ZSwgbG9nZ2VyKSxcblx0XHRcdERldmljZTogY3JlYXRlRGV2aWNlTW9kZWwoc2VxdWVsaXplLCBsb2dnZXIpLFxuXHRcdFx0RmFpbGVkTG9naW5BdHRlbXB0czogY3JlYXRlRmFpbGVkTG9naW5BdHRlbXB0c01vZGVsKFxuXHRcdFx0XHRzZXF1ZWxpemUsXG5cdFx0XHRcdGxvZ2dlclxuXHRcdFx0KSxcblx0XHRcdEZlYXR1cmVSZXF1ZXN0OiBjcmVhdGVGZWF0dXJlUmVxdWVzdE1vZGVsKHNlcXVlbGl6ZSwgbG9nZ2VyKSxcblx0XHRcdEZlZWRiYWNrU3VydmV5OiBjcmVhdGVGZWVkYmFja1N1cnZleU1vZGVsKHNlcXVlbGl6ZSwgbG9nZ2VyKSxcblx0XHRcdEd1ZXN0Ym9va0VudHJ5OiBjcmVhdGVHdWVzdGJvb2tFbnRyeU1vZGVsKHNlcXVlbGl6ZSwgbG9nZ2VyKSxcblx0XHRcdE11bHRpRmFjdG9yQXV0aFNldHVwOiBjcmVhdGVNdWx0aUZhY3RvckF1dGhTZXR1cE1vZGVsKFxuXHRcdFx0XHRzZXF1ZWxpemUsXG5cdFx0XHRcdGxvZ2dlclxuXHRcdFx0KSxcblx0XHRcdFJlY292ZXJ5TWV0aG9kOiBjcmVhdGVSZWNvdmVyeU1ldGhvZE1vZGVsKHNlcXVlbGl6ZSwgbG9nZ2VyKSxcblx0XHRcdFNlY3VyaXR5RXZlbnQ6IGNyZWF0ZVNlY3VyaXR5RXZlbnRNb2RlbChzZXF1ZWxpemUsIGxvZ2dlciksXG5cdFx0XHRTdXBwb3J0UmVxdWVzdDogY3JlYXRlU3VwcG9ydFJlcXVlc3RNb2RlbChzZXF1ZWxpemUsIGxvZ2dlciksXG5cdFx0XHRVc2VyOiBjcmVhdGVVc2VyTW9kZWwoc2VxdWVsaXplLCBsb2dnZXIpLFxuXHRcdFx0VXNlck1mYTogY3JlYXRlVXNlck1mYU1vZGVsKHNlcXVlbGl6ZSwgbG9nZ2VyKSxcblx0XHRcdFVzZXJTZXNzaW9uOiBjcmVhdGVVc2VyU2Vzc2lvbk1vZGVsKHNlcXVlbGl6ZSwgbG9nZ2VyKVxuXHRcdH07XG5cblx0XHRtb2RlbHMuVXNlci5oYXNNYW55KG1vZGVscy5BdWRpdExvZywge1xuXHRcdFx0Zm9yZWlnbktleTogJ2lkJyxcblx0XHRcdGFzOiAnYXVkaXRMb2dzJ1xuXHRcdH0pO1xuXHRcdG1vZGVscy5Vc2VyLmhhc01hbnkobW9kZWxzLkZhaWxlZExvZ2luQXR0ZW1wdHMsIHtcblx0XHRcdGZvcmVpZ25LZXk6ICdpZCcsXG5cdFx0XHRhczogJ2ZhaWxlZExvZ2luQXR0ZW1wdHMnXG5cdFx0fSk7XG5cdFx0bW9kZWxzLlVzZXIuaGFzTWFueShtb2RlbHMuR3Vlc3Rib29rRW50cnksIHtcblx0XHRcdGZvcmVpZ25LZXk6ICdpZCcsXG5cdFx0XHRhczogJ2d1ZXN0Ym9va0VudHJpZXMnXG5cdFx0fSk7XG5cdFx0bW9kZWxzLlVzZXIuaGFzTWFueShtb2RlbHMuUmVjb3ZlcnlNZXRob2QsIHtcblx0XHRcdGZvcmVpZ25LZXk6ICdpZCcsXG5cdFx0XHRhczogJ3JlY292ZXJ5TWV0aG9kcydcblx0XHR9KTtcblx0XHRtb2RlbHMuVXNlci5oYXNNYW55KG1vZGVscy5TZWN1cml0eUV2ZW50LCB7XG5cdFx0XHRmb3JlaWduS2V5OiAnaWQnLFxuXHRcdFx0YXM6ICdzZWN1cml0eUV2ZW50cydcblx0XHR9KTtcblx0XHRtb2RlbHMuVXNlci5oYXNNYW55KG1vZGVscy5TdXBwb3J0UmVxdWVzdCwge1xuXHRcdFx0Zm9yZWlnbktleTogJ2lkJyxcblx0XHRcdGFzOiAnc3VwcG9ydFJlcXVlc3RzJ1xuXHRcdH0pO1xuXHRcdG1vZGVscy5Vc2VyLmhhc01hbnkobW9kZWxzLlVzZXJTZXNzaW9uLCB7XG5cdFx0XHRmb3JlaWduS2V5OiAnaWQnLFxuXHRcdFx0YXM6ICdzZXNzaW9ucydcblx0XHR9KTtcblxuXHRcdG1vZGVscy5Vc2VyLmhhc09uZShtb2RlbHMuVXNlck1mYSwgeyBmb3JlaWduS2V5OiAnaWQnLCBhczogJ3VzZXInIH0pO1xuXG5cdFx0bW9kZWxzLkF1ZGl0TG9nLmJlbG9uZ3NUbyhtb2RlbHMuVXNlciwge1xuXHRcdFx0Zm9yZWlnbktleTogJ2lkJyxcblx0XHRcdGFzOiAndXNlcidcblx0XHR9KTtcblx0XHRtb2RlbHMuRGF0YVNoYXJlT3B0aW9ucy5iZWxvbmdzVG8obW9kZWxzLlVzZXIsIHtcblx0XHRcdGZvcmVpZ25LZXk6ICdpZCcsXG5cdFx0XHRhczogJ3VzZXInXG5cdFx0fSk7XG5cdFx0bW9kZWxzLkRldmljZS5iZWxvbmdzVG8obW9kZWxzLlVzZXIsIHsgZm9yZWlnbktleTogJ2lkJywgYXM6ICd1c2VyJyB9KTtcblx0XHRtb2RlbHMuRmFpbGVkTG9naW5BdHRlbXB0cy5iZWxvbmdzVG8obW9kZWxzLlVzZXIsIHtcblx0XHRcdGZvcmVpZ25LZXk6ICdpZCcsXG5cdFx0XHRhczogJ3VzZXInXG5cdFx0fSk7XG5cdFx0bW9kZWxzLkZlYXR1cmVSZXF1ZXN0LmJlbG9uZ3NUbyhtb2RlbHMuVXNlciwge1xuXHRcdFx0Zm9yZWlnbktleTogJ2lkJyxcblx0XHRcdGFzOiAndXNlcidcblx0XHR9KTtcblx0XHRtb2RlbHMuR3Vlc3Rib29rRW50cnkuYmVsb25nc1RvKG1vZGVscy5Vc2VyLCB7XG5cdFx0XHRmb3JlaWduS2V5OiAnaWQnLFxuXHRcdFx0YXM6ICd1c2VyJ1xuXHRcdH0pO1xuXHRcdG1vZGVscy5NdWx0aUZhY3RvckF1dGhTZXR1cC5iZWxvbmdzVG8obW9kZWxzLlVzZXIsIHtcblx0XHRcdGZvcmVpZ25LZXk6ICdpZCcsXG5cdFx0XHRhczogJ3VzZXInXG5cdFx0fSk7XG5cdFx0bW9kZWxzLlJlY292ZXJ5TWV0aG9kLmJlbG9uZ3NUbyhtb2RlbHMuVXNlciwge1xuXHRcdFx0Zm9yZWlnbktleTogJ2lkJyxcblx0XHRcdGFzOiAndXNlcidcblx0XHR9KTtcblx0XHRtb2RlbHMuU2VjdXJpdHlFdmVudC5iZWxvbmdzVG8obW9kZWxzLlVzZXIsIHtcblx0XHRcdGZvcmVpZ25LZXk6ICdpZCcsXG5cdFx0XHRhczogJ3VzZXInXG5cdFx0fSk7XG5cdFx0bW9kZWxzLlN1cHBvcnRSZXF1ZXN0LmJlbG9uZ3NUbyhtb2RlbHMuVXNlciwge1xuXHRcdFx0Zm9yZWlnbktleTogJ2lkJyxcblx0XHRcdGFzOiAndXNlcidcblx0XHR9KTtcblx0XHRtb2RlbHMuVXNlck1mYS5iZWxvbmdzVG8obW9kZWxzLlVzZXIsIHsgZm9yZWlnbktleTogJ2lkJywgYXM6ICd1c2VyJyB9KTtcblx0XHRtb2RlbHMuVXNlclNlc3Npb24uYmVsb25nc1RvKG1vZGVscy5Vc2VyLCB7XG5cdFx0XHRmb3JlaWduS2V5OiAnaWQnLFxuXHRcdFx0YXM6ICd1c2VyJ1xuXHRcdH0pO1xuXG5cdFx0cmV0dXJuIG1vZGVscztcblx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRwcm9jZXNzRXJyb3IoZXJyb3IsIGxvZ2dlciB8fCBjb25zb2xlKTtcblx0XHR0aHJvdyBlcnJvcjtcblx0fVxufVxuIl19
