import { CacheService } from '../../../services/Cache.mjs';
import { RedisService } from '../../../services/Redis.mjs';
export class CacheServiceProvider {
	static instance = null;
	static async getCacheService() {
		if (!this.instance) {
			this.instance = await CacheService.getInstance();
		}
		return this.instance;
	}
}
export class RedisServiceProvider {
	static instance = null;
	static async loadRedisDeps() {
		const expressModule = await import('express');
		const redisModule = await import('redis');
		const helpersModule = await import('../../../utils/helpers');
		const expressConfigModule = await import('../../../config/express');
		return {
			req: expressModule.request,
			res: expressModule.response,
			next: () => {},
			createRedisClient: redisModule.createClient,
			validateDependencies: helpersModule.validateDependencies,
			blankRequest: expressConfigModule.blankRequest
		};
	}
	static async getRedisService() {
		if (!this.instance) {
			const deps = await this.loadRedisDeps();
			this.instance = await RedisService.getInstance(deps);
		}
		return this.instance;
	}
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQ2FjaGVMYXllclNlcnZpY2VQcm92aWRlcnMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9zcmMvaW5kZXgvZmFjdG9yeS9wcm92aWRlcnMvQ2FjaGVMYXllclNlcnZpY2VQcm92aWRlcnMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLFlBQVksRUFBRSxNQUFNLHlCQUF5QixDQUFDO0FBQ3ZELE9BQU8sRUFBRSxZQUFZLEVBQUUsTUFBTSx5QkFBeUIsQ0FBQztBQVF2RCxNQUFNLE9BQU8sb0JBQW9CO0lBQ3hCLE1BQU0sQ0FBQyxRQUFRLEdBQWlDLElBQUksQ0FBQztJQUV0RCxNQUFNLENBQUMsS0FBSyxDQUFDLGVBQWU7UUFDbEMsSUFBSSxDQUFDLElBQUksQ0FBQyxRQUFRLEVBQUUsQ0FBQztZQUNwQixJQUFJLENBQUMsUUFBUSxHQUFHLE1BQU0sWUFBWSxDQUFDLFdBQVcsRUFBRSxDQUFDO1FBQ2xELENBQUM7UUFDRCxPQUFPLElBQUksQ0FBQyxRQUFRLENBQUM7SUFDdEIsQ0FBQzs7QUFHRixNQUFNLE9BQU8sb0JBQW9CO0lBQ3hCLE1BQU0sQ0FBQyxRQUFRLEdBQWlDLElBQUksQ0FBQztJQUVyRCxNQUFNLENBQUMsS0FBSyxDQUFDLGFBQWE7UUFDakMsTUFBTSxhQUFhLEdBQUcsTUFBTSxNQUFNLENBQUMsU0FBUyxDQUFDLENBQUM7UUFDOUMsTUFBTSxXQUFXLEdBQUcsTUFBTSxNQUFNLENBQUMsT0FBTyxDQUFDLENBQUM7UUFDMUMsTUFBTSxhQUFhLEdBQUcsTUFBTSxNQUFNLENBQUMsd0JBQXdCLENBQUMsQ0FBQztRQUM3RCxNQUFNLG1CQUFtQixHQUFHLE1BQU0sTUFBTSxDQUFDLHlCQUF5QixDQUFDLENBQUM7UUFFcEUsT0FBTztZQUNOLEdBQUcsRUFBRSxhQUFhLENBQUMsT0FBa0I7WUFDckMsR0FBRyxFQUFFLGFBQWEsQ0FBQyxRQUFvQjtZQUN2QyxJQUFJLEVBQUUsQ0FBQyxHQUFHLEVBQUUsR0FBRSxDQUFDLENBQWlCO1lBQ2hDLGlCQUFpQixFQUFFLFdBQVcsQ0FBQyxZQUFZO1lBQzNDLG9CQUFvQixFQUFFLGFBQWEsQ0FBQyxvQkFBb0I7WUFDeEQsWUFBWSxFQUFFLG1CQUFtQixDQUFDLFlBQVk7U0FDOUMsQ0FBQztJQUNILENBQUM7SUFFTSxNQUFNLENBQUMsS0FBSyxDQUFDLGVBQWU7UUFDbEMsSUFBSSxDQUFDLElBQUksQ0FBQyxRQUFRLEVBQUUsQ0FBQztZQUNwQixNQUFNLElBQUksR0FBRyxNQUFNLElBQUksQ0FBQyxhQUFhLEVBQUUsQ0FBQztZQUN4QyxJQUFJLENBQUMsUUFBUSxHQUFHLE1BQU0sWUFBWSxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUN0RCxDQUFDO1FBRUQsT0FBTyxJQUFJLENBQUMsUUFBUSxDQUFDO0lBQ3RCLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDYWNoZVNlcnZpY2UgfSBmcm9tICcuLi8uLi8uLi9zZXJ2aWNlcy9DYWNoZSc7XG5pbXBvcnQgeyBSZWRpc1NlcnZpY2UgfSBmcm9tICcuLi8uLi8uLi9zZXJ2aWNlcy9SZWRpcyc7XG5pbXBvcnQge1xuXHRDYWNoZVNlcnZpY2VJbnRlcmZhY2UsXG5cdFJlZGlzU2VydmljZURlcHMsXG5cdFJlZGlzU2VydmljZUludGVyZmFjZVxufSBmcm9tICcuLi8uLi9pbnRlcmZhY2VzL21haW4nO1xuaW1wb3J0IHsgTmV4dEZ1bmN0aW9uLCBSZXF1ZXN0LCBSZXNwb25zZSB9IGZyb20gJ2V4cHJlc3MnO1xuXG5leHBvcnQgY2xhc3MgQ2FjaGVTZXJ2aWNlUHJvdmlkZXIge1xuXHRwcml2YXRlIHN0YXRpYyBpbnN0YW5jZTogQ2FjaGVTZXJ2aWNlSW50ZXJmYWNlIHwgbnVsbCA9IG51bGw7XG5cblx0cHVibGljIHN0YXRpYyBhc3luYyBnZXRDYWNoZVNlcnZpY2UoKTogUHJvbWlzZTxDYWNoZVNlcnZpY2VJbnRlcmZhY2U+IHtcblx0XHRpZiAoIXRoaXMuaW5zdGFuY2UpIHtcblx0XHRcdHRoaXMuaW5zdGFuY2UgPSBhd2FpdCBDYWNoZVNlcnZpY2UuZ2V0SW5zdGFuY2UoKTtcblx0XHR9XG5cdFx0cmV0dXJuIHRoaXMuaW5zdGFuY2U7XG5cdH1cbn1cblxuZXhwb3J0IGNsYXNzIFJlZGlzU2VydmljZVByb3ZpZGVyIHtcblx0cHJpdmF0ZSBzdGF0aWMgaW5zdGFuY2U6IFJlZGlzU2VydmljZUludGVyZmFjZSB8IG51bGwgPSBudWxsO1xuXG5cdHByaXZhdGUgc3RhdGljIGFzeW5jIGxvYWRSZWRpc0RlcHMoKTogUHJvbWlzZTxSZWRpc1NlcnZpY2VEZXBzPiB7XG5cdFx0Y29uc3QgZXhwcmVzc01vZHVsZSA9IGF3YWl0IGltcG9ydCgnZXhwcmVzcycpO1xuXHRcdGNvbnN0IHJlZGlzTW9kdWxlID0gYXdhaXQgaW1wb3J0KCdyZWRpcycpO1xuXHRcdGNvbnN0IGhlbHBlcnNNb2R1bGUgPSBhd2FpdCBpbXBvcnQoJy4uLy4uLy4uL3V0aWxzL2hlbHBlcnMnKTtcblx0XHRjb25zdCBleHByZXNzQ29uZmlnTW9kdWxlID0gYXdhaXQgaW1wb3J0KCcuLi8uLi8uLi9jb25maWcvZXhwcmVzcycpO1xuXG5cdFx0cmV0dXJuIHtcblx0XHRcdHJlcTogZXhwcmVzc01vZHVsZS5yZXF1ZXN0IGFzIFJlcXVlc3QsXG5cdFx0XHRyZXM6IGV4cHJlc3NNb2R1bGUucmVzcG9uc2UgYXMgUmVzcG9uc2UsXG5cdFx0XHRuZXh0OiAoKCkgPT4ge30pIGFzIE5leHRGdW5jdGlvbixcblx0XHRcdGNyZWF0ZVJlZGlzQ2xpZW50OiByZWRpc01vZHVsZS5jcmVhdGVDbGllbnQsXG5cdFx0XHR2YWxpZGF0ZURlcGVuZGVuY2llczogaGVscGVyc01vZHVsZS52YWxpZGF0ZURlcGVuZGVuY2llcyxcblx0XHRcdGJsYW5rUmVxdWVzdDogZXhwcmVzc0NvbmZpZ01vZHVsZS5ibGFua1JlcXVlc3Rcblx0XHR9O1xuXHR9XG5cblx0cHVibGljIHN0YXRpYyBhc3luYyBnZXRSZWRpc1NlcnZpY2UoKTogUHJvbWlzZTxSZWRpc1NlcnZpY2VJbnRlcmZhY2U+IHtcblx0XHRpZiAoIXRoaXMuaW5zdGFuY2UpIHtcblx0XHRcdGNvbnN0IGRlcHMgPSBhd2FpdCB0aGlzLmxvYWRSZWRpc0RlcHMoKTtcblx0XHRcdHRoaXMuaW5zdGFuY2UgPSBhd2FpdCBSZWRpc1NlcnZpY2UuZ2V0SW5zdGFuY2UoZGVwcyk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHRoaXMuaW5zdGFuY2U7XG5cdH1cbn1cbiJdfQ==
