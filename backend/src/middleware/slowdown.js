import '../../types/custom/express-session';
function slowdownMiddleware(req, res, next) {
	const requestTime = new Date().getTime();
	// Check if we already stored a request time for this IP
	if (!req.session.lastRequestTime) {
		req.session.lastRequestTime = requestTime;
		next();
	} else {
		const timeDiff = requestTime - req.session.lastRequestTime;
		const slowdownThreshold = 100; // *DEV-NOTE* Adjust this value as needed (in ms)
		if (timeDiff < slowdownThreshold) {
			const waitTime = slowdownThreshold - timeDiff;
			setTimeout(next, waitTime);
		} else {
			req.session.lastRequestTime = requestTime;
			next();
		}
	}
}
export default slowdownMiddleware;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2xvd2Rvd24uanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi90cy9taWRkbGV3YXJlL3Nsb3dkb3duLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUNBLE9BQU8sb0NBQW9DLENBQUM7QUFFNUMsU0FBUyxrQkFBa0IsQ0FBQyxHQUFZLEVBQUUsR0FBYSxFQUFFLElBQWtCO0lBQzFFLE1BQU0sV0FBVyxHQUFHLElBQUksSUFBSSxFQUFFLENBQUMsT0FBTyxFQUFFLENBQUM7SUFFekMsd0RBQXdEO0lBQ3hELElBQUksQ0FBQyxHQUFHLENBQUMsT0FBTyxDQUFDLGVBQWUsRUFBRSxDQUFDO1FBQ2xDLEdBQUcsQ0FBQyxPQUFPLENBQUMsZUFBZSxHQUFHLFdBQVcsQ0FBQztRQUMxQyxJQUFJLEVBQUUsQ0FBQztJQUNSLENBQUM7U0FBTSxDQUFDO1FBQ1AsTUFBTSxRQUFRLEdBQUcsV0FBVyxHQUFHLEdBQUcsQ0FBQyxPQUFPLENBQUMsZUFBZSxDQUFDO1FBQzNELE1BQU0saUJBQWlCLEdBQUcsR0FBRyxDQUFDLENBQUMsaURBQWlEO1FBRWhGLElBQUksUUFBUSxHQUFHLGlCQUFpQixFQUFFLENBQUM7WUFDbEMsTUFBTSxRQUFRLEdBQUcsaUJBQWlCLEdBQUcsUUFBUSxDQUFDO1lBQzlDLFVBQVUsQ0FBQyxJQUFJLEVBQUUsUUFBUSxDQUFDLENBQUM7UUFDNUIsQ0FBQzthQUFNLENBQUM7WUFDUCxHQUFHLENBQUMsT0FBTyxDQUFDLGVBQWUsR0FBRyxXQUFXLENBQUM7WUFDMUMsSUFBSSxFQUFFLENBQUM7UUFDUixDQUFDO0lBQ0YsQ0FBQztBQUNGLENBQUM7QUFFRCxlQUFlLGtCQUFrQixDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dEZ1bmN0aW9uLCBSZXF1ZXN0LCBSZXNwb25zZSB9IGZyb20gJ2V4cHJlc3MnO1xuaW1wb3J0ICcuLi8uLi90eXBlcy9jdXN0b20vZXhwcmVzcy1zZXNzaW9uJztcblxuZnVuY3Rpb24gc2xvd2Rvd25NaWRkbGV3YXJlKHJlcTogUmVxdWVzdCwgcmVzOiBSZXNwb25zZSwgbmV4dDogTmV4dEZ1bmN0aW9uKSB7XG5cdGNvbnN0IHJlcXVlc3RUaW1lID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG5cblx0Ly8gQ2hlY2sgaWYgd2UgYWxyZWFkeSBzdG9yZWQgYSByZXF1ZXN0IHRpbWUgZm9yIHRoaXMgSVBcblx0aWYgKCFyZXEuc2Vzc2lvbi5sYXN0UmVxdWVzdFRpbWUpIHtcblx0XHRyZXEuc2Vzc2lvbi5sYXN0UmVxdWVzdFRpbWUgPSByZXF1ZXN0VGltZTtcblx0XHRuZXh0KCk7XG5cdH0gZWxzZSB7XG5cdFx0Y29uc3QgdGltZURpZmYgPSByZXF1ZXN0VGltZSAtIHJlcS5zZXNzaW9uLmxhc3RSZXF1ZXN0VGltZTtcblx0XHRjb25zdCBzbG93ZG93blRocmVzaG9sZCA9IDEwMDsgLy8gKkRFVi1OT1RFKiBBZGp1c3QgdGhpcyB2YWx1ZSBhcyBuZWVkZWQgKGluIG1zKVxuXG5cdFx0aWYgKHRpbWVEaWZmIDwgc2xvd2Rvd25UaHJlc2hvbGQpIHtcblx0XHRcdGNvbnN0IHdhaXRUaW1lID0gc2xvd2Rvd25UaHJlc2hvbGQgLSB0aW1lRGlmZjtcblx0XHRcdHNldFRpbWVvdXQobmV4dCwgd2FpdFRpbWUpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRyZXEuc2Vzc2lvbi5sYXN0UmVxdWVzdFRpbWUgPSByZXF1ZXN0VGltZTtcblx0XHRcdG5leHQoKTtcblx0XHR9XG5cdH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgc2xvd2Rvd25NaWRkbGV3YXJlO1xuIl19
